/*! For license information please see poonya.browser.system.bundle.min.js.LICENSE.txt */
System.register("poonya",[],(function(e,t){return{execute:function(){e((()=>{var e={722:(e,t,s)=>{const{PoonyaStaticLibrary:n,FIELDFLAGS:r}=s(40),i=/"/g,a=/<([aA-zZ0-9]+)/;function o(e){return null===e?"null":void 0===e?"undefined":e.toString()}new class extends n{constructor(){super("default.html.tags",!1,!1,"TAGS"),this.addField("A","a",r.CONSTANT),this.addField("ABBR","abbr",r.CONSTANT),this.addField("ADDRESS","address",r.CONSTANT),this.addField("AREA","area",r.CONSTANT),this.addField("ARTICLE","article",r.CONSTANT),this.addField("ASIDE","aside",r.CONSTANT),this.addField("AUDIO","audio",r.CONSTANT),this.addField("B","b",r.CONSTANT),this.addField("BASE","base",r.CONSTANT),this.addField("BDI","bdi",r.CONSTANT),this.addField("BDO","bdo",r.CONSTANT),this.addField("BLOCKQUOTE","blockquote",r.CONSTANT),this.addField("BODY","body",r.CONSTANT),this.addField("BR","br",r.CONSTANT),this.addField("BUTTON","button",r.CONSTANT),this.addField("CANVAS","canvas",r.CONSTANT),this.addField("CAPTION","caption",r.CONSTANT),this.addField("CITE","cite",r.CONSTANT),this.addField("CODE","code",r.CONSTANT),this.addField("COL","col",r.CONSTANT),this.addField("COLGROUP","colgroup",r.CONSTANT),this.addField("DATA","data",r.CONSTANT),this.addField("DATALIST","datalist",r.CONSTANT),this.addField("DD","dd",r.CONSTANT),this.addField("DEL","del",r.CONSTANT),this.addField("DETAILS","details",r.CONSTANT),this.addField("DFN","dfn",r.CONSTANT),this.addField("DIALOG","dialog",r.CONSTANT),this.addField("DIV","div",r.CONSTANT),this.addField("DL","dl",r.CONSTANT),this.addField("DT","dt",r.CONSTANT),this.addField("EM","em",r.CONSTANT),this.addField("EMBED","embed",r.CONSTANT),this.addField("FIELDSET","fieldset",r.CONSTANT),this.addField("FIGCAPTION","figcaption",r.CONSTANT),this.addField("FIGURE","figure",r.CONSTANT),this.addField("FOOTER","footer",r.CONSTANT),this.addField("FORM","form",r.CONSTANT),this.addField("H1","h1",r.CONSTANT),this.addField("H2","h2",r.CONSTANT),this.addField("H3","h3",r.CONSTANT),this.addField("H4","h4",r.CONSTANT),this.addField("H5","h5",r.CONSTANT),this.addField("H6","h6",r.CONSTANT),this.addField("HEAD","head",r.CONSTANT),this.addField("HEADER","header",r.CONSTANT),this.addField("HR","hr",r.CONSTANT),this.addField("HTML","html",r.CONSTANT),this.addField("I","i",r.CONSTANT),this.addField("IFRAME","iframe",r.CONSTANT),this.addField("IMG","img",r.CONSTANT),this.addField("INPUT","input",r.CONSTANT),this.addField("INS","ins",r.CONSTANT),this.addField("KBD","kbd",r.CONSTANT),this.addField("LABEL","label",r.CONSTANT),this.addField("LEGEND","legend",r.CONSTANT),this.addField("LI","li",r.CONSTANT),this.addField("LINK","link",r.CONSTANT),this.addField("MAIN","main",r.CONSTANT),this.addField("MAP","map",r.CONSTANT),this.addField("MARK","mark",r.CONSTANT),this.addField("META","meta",r.CONSTANT),this.addField("METER","meter",r.CONSTANT),this.addField("NAV","nav",r.CONSTANT),this.addField("NOSCRIPT","noscript",r.CONSTANT),this.addField("OBJECT","object",r.CONSTANT),this.addField("OL","ol",r.CONSTANT),this.addField("OPTGROUP","optgroup",r.CONSTANT),this.addField("OPTION","option",r.CONSTANT),this.addField("OUTPUT","output",r.CONSTANT),this.addField("P","p",r.CONSTANT),this.addField("PARAM","param",r.CONSTANT),this.addField("PICTURE","picture",r.CONSTANT),this.addField("PRE","pre",r.CONSTANT),this.addField("PROGRESS","progress",r.CONSTANT),this.addField("Q","q",r.CONSTANT),this.addField("RUBY","ruby",r.CONSTANT),this.addField("RB","rb",r.CONSTANT),this.addField("RT","rt",r.CONSTANT),this.addField("RTC","rtc",r.CONSTANT),this.addField("RP","rp",r.CONSTANT),this.addField("S","s",r.CONSTANT),this.addField("SAMP","samp",r.CONSTANT),this.addField("SCRIPT","script",r.CONSTANT),this.addField("SECTION","section",r.CONSTANT),this.addField("SELECT","select",r.CONSTANT),this.addField("SMALL","small",r.CONSTANT),this.addField("SOURCE","source",r.CONSTANT),this.addField("SPAN","span",r.CONSTANT),this.addField("STRONG","strong",r.CONSTANT),this.addField("STYLE","style",r.CONSTANT),this.addField("SUB","sub",r.CONSTANT),this.addField("SUMMARY","summary",r.CONSTANT),this.addField("SUP","sup",r.CONSTANT),this.addField("TABLE","table",r.CONSTANT),this.addField("TBODY","tbody",r.CONSTANT),this.addField("TD","td",r.CONSTANT),this.addField("TEMPLATE","template",r.CONSTANT),this.addField("TEXTAREA","textarea",r.CONSTANT),this.addField("TFOOT","tfoot",r.CONSTANT),this.addField("TH","th",r.CONSTANT),this.addField("THEAD","thead",r.CONSTANT),this.addField("TIME","time",r.CONSTANT),this.addField("TITLE","title",r.CONSTANT),this.addField("TR","tr",r.CONSTANT),this.addField("TRACK","track",r.CONSTANT),this.addField("U","u",r.CONSTANT),this.addField("UL","ul",r.CONSTANT),this.addField("VAR","var",r.CONSTANT),this.addField("VIDEO","video",r.CONSTANT),this.addField("WBR","wbr",r.CONSTANT)}},new class extends n{constructor(){super("default.html",!1,!1,"html"),this.addLib("default.html.tags",r.CONSTANT),this.addField("createElement",this.createElement,r.CONSTANT),this.addField("getElementName",this.getElementName,r.CONSTANT),this.addField("isElement",this.isElement,r.CONSTANT),this.addField("createTag",this.createTag,r.CONSTANT),this.addField("closeTag",this.closeTag,r.CONSTANT)}createElement(e,t,s,n){if("string"==typeof t&&"string"==typeof s){let e=new Array;for(let t in n)e.push(`${t}="${o(n[t]).replace(i,'\\"')}"`);return`<${t} ${e.join(" ")}>${s}</${t}>`}return null}getElementName(e,t){return"string"==typeof t?t.match(a)[1]:null}isElement(e,t,s){return"string"==typeof t&&t.match(a)[1]==s}createTag(e,t,s){if("string"==typeof t){let e=new Array;for(let t in s)e.push(`${t}="${o(s[t]).replace(i,'\\"')}"`);return`<${t}${e.length>0?" "+e.join(" "):""}>`}return null}closeTag(e,t){return"string"==typeof t?`</${t}>`:null}}},990:(e,t,s)=>{const{PoonyaStaticLibrary:n,PoonyaPrototype:r,FIELDFLAGS:i,Exceptions:a}=s(40),o=new Date;new class extends n{constructor(){super("default.math",!1,!1,"math"),this.addField("floor",this.floor,i.CONSTANT),this.addField("round",this.round,i.CONSTANT),this.addField("ceil",this.ceil,i.CONSTANT),this.addField("abs",this.abs,i.CONSTANT)}ceil(e,t){return"number"!=typeof t||isNaN(t)?null:Math.ceil(t)}floor(e,t){return"number"!=typeof t||isNaN(t)?null:Math.floor(t)}round(e,t){return"number"!=typeof t||isNaN(t)?null:Math.round(t)}abs(e,t){return"number"!=typeof t||isNaN(t)?null:Math.abs(t)}},new class extends n{constructor(){super("default.regexp",!1,!1,"regexp"),this.addField("test",this.test,i.CONSTANT),this.addField("replace",this.replace,i.CONSTANT)}test(e,t,s,n){return new RegExp(t,s||void 0).test(n)}replace(e,t,s,n,r){return n.replace(new RegExp(t,s||void 0),r)}},new class extends n{constructor(){super("default.dates",!1,!1,"dates"),this.addField("minutes",this.minutes,i.CONSTANT),this.addField("seconds",this.seconds,i.CONSTANT),this.addField("month",this.month,i.CONSTANT),this.addField("hours",this.hours,i.CONSTANT),this.addField("year",this.year,i.CONSTANT),this.addField("day",this.day,i.CONSTANT),this.addField("now",this.now,i.CONSTANT)}year(){return o.getUTCFullYear()}month(){return o.getUTCMonth()}day(){return o.getUTCDay()}hours(){return o.getUTCHours()}minutes(){return o.getUTCMinutes()}seconds(){return o.getUTCSeconds()}now(){return Date.now()}},new class extends n{constructor(){super("default.numbers",!1,!1,"numbers"),this.addField("random",this.random,i.CONSTANT),this.addField("isNumber",this.isNumber,i.CONSTANT),this.addField("parseInt",this.parseInt,i.CONSTANT)}random(e,t,s){return"number"!=typeof t||"number"!=typeof s||isNaN(t)||isNaN(s)?Math.round(t+Math.random()*(s-t)):Math.random()}isNumber(e,t){return!isNaN(t)&&"number"==typeof t}parseInt(e,t){return isNaN(t=parseInt(t))?null:t}};class l extends r{constructor(){super([],"Object"),this.addField("create",this.create,i.CONSTANT|i.STATIC),this.addField("values",this.values,i.CONSTANT),this.addField("assign",this.assign,i.CONSTANT),this.addField("remove",this.remove,i.CONSTANT),this.addField("keys",this.keys,i.CONSTANT),this.addField("set",this.set,i.CONSTANT),this.addField("has",this.has,i.CONSTANT),this.addField("get",this.get,i.CONSTANT)}keys(){return this.keys()}values(){return this.values()}assign(e,...t){for(let e=0,s=t.length;e<s;e++)this.append(t[e]);return null}set(e,t,s){return this.set(e.context,t,s),null}has(e,t){return this.has(t)}get(e,t){return this.get(t)}remove(e,t){return this.delete(t),null}create(){return new Object}}class c extends r{constructor(){super([],"Integer")}}class u extends r{constructor(){super([],"Number")}}class d extends r{constructor(){super([],"Boolean")}}class p extends r{constructor(){super([],"Null")}}class h extends r{constructor(){super([],"Pattern")}}class T extends r{constructor(e){super([],"String"),this.addField("charAt",this.charAt,i.CONSTANT,e),this.addField("length",this.length,i.CONSTANT|i.PROPERTY,e)}charAt(e,t){return null!=t?this.data.charAt(t):null}length(){return this.data.length}}class f extends r{constructor(e){super([],"Array"),this.addField("from",this.from,i.CONSTANT|i.STATIC,e),this.addField("includes",this.includes,i.CONSTANT,e),this.addField("indexOf",this.indexOf,i.CONSTANT,e),this.addField("concat",this.concat,i.CONSTANT,e),this.addField("append",this.append,i.CONSTANT,e),this.addField("length",this.length,i.CONSTANT,e),this.addField("remove",this.remove,i.CONSTANT,e),this.addField("slice",this.slice,i.CONSTANT,e),this.addField("pop",this.pop,i.CONSTANT,e)}from(e,...t){return t}includes(e,t){for(let s of this.fields)if(s.value.result(e.context,null,e.reject)==t)return!0;return!1}remove(e,t,s){("number"!=typeof t||isNaN(t))&&e.reject(e.position,new a.PoonyaException("From must have a number type")),("number"!=typeof s||isNaN(s))&&e.reject(e.position,new a.PoonyaException("To must have a number type"));const n=s-t;for(;t!=s;)this.remove(t),t+=n;return null}indexOf(e,t){for(let[s,n]of this.fields)if(n.result(e.context,null,e.reject)==t)return s;return-1}length(){return this.fields.size}append(e,t){return this.push(t),null}concat(e,...t){for(let e=0,s=t.length;e<s;e++)for(let s=0,n=t[e].length;s<n;s++)this.push(t[e][s]);return null}slice(e,t,s){("number"!=typeof t||isNaN(t))&&e.reject(e.position,new a.PoonyaException("From must have a number type")),("number"!=typeof s||isNaN(s))&&e.reject(e.position,new a.PoonyaException("To must have a number type"));const n=s-t,r=new Array;for(;t!=s;)r.push(this.get(t)),t+=n;return r}pop(){const e=this.fields.get(this.fields.size-1);return this.fields.remove(this.fields.size-1),e}}new class extends n{constructor(){super("default",!0),this.expandPrototype(l),this.expandPrototype(f),this.expandPrototype(T),this.expandPrototype(c),this.expandPrototype(d),this.expandPrototype(u),this.expandPrototype(p),this.expandPrototype(h),this.addField("endd","\n\n",i.CONSTANT),this.addField("endl","\n",i.CONSTANT),this.addField("tab","\t",i.CONSTANT),this.addField("log",this.log,i.CONSTANT),this.addField("wait",this.wait,i.CONSTANT),this.addLib("default.numbers"),this.addLib("default.regexp"),this.addLib("default.dates"),this.addLib("default.math")}wait(e,t){setTimeout(e.resolve,t)}log(e,...t){return console.log(...t),null}}},138:e=>{"use strict";var t,s="object"==typeof Reflect?Reflect:null,n=s&&"function"==typeof s.apply?s.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)};t=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(s,n){function r(){void 0!==i&&e.removeListener("error",i),s([].slice.call(arguments))}var i;"error"!==t&&(i=function(s){e.removeListener(t,r),n(s)},e.once("error",i)),e.once(t,r)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,s,n){var r,i,a,c;if(o(s),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,s.listener?s.listener:s),i=e._events),a=i[t]),void 0===a)a=i[t]=s,++e._eventsCount;else if("function"==typeof a?a=i[t]=n?[s,a]:[a,s]:n?a.unshift(s):a.push(s),(r=l(e))>0&&a.length>r&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,s){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:s},r=u.bind(n);return r.listener=s,n.wrapFn=r,r}function p(e,t,s){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"==typeof r?s?[r.listener||r]:[r]:s?function(e){for(var t=new Array(e.length),s=0;s<t.length;++s)t[s]=e[s].listener||e[s];return t}(r):T(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var s=t[e];if("function"==typeof s)return 1;if(void 0!==s)return s.length}return 0}function T(e,t){for(var s=new Array(t),n=0;n<t;++n)s[n]=e[n];return s}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var c=l.length,u=T(l,c);for(s=0;s<c;++s)n(u[s],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return o(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var s,n,r,i,a;if(o(t),void 0===(n=this._events))return this;if(void 0===(s=n[e]))return this;if(s===t||s.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,s.listener||t));else if("function"!=typeof s){for(r=-1,i=s.length-1;i>=0;i--)if(s[i]===t||s[i].listener===t){a=s[i].listener,r=i;break}if(r<0)return this;0===r?s.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(s,r),1===s.length&&(n[e]=s[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,s,n;if(void 0===(s=this._events))return this;if(void 0===s.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==s[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete s[e]),this;if(0===arguments.length){var r,i=Object.keys(s);for(n=0;n<i.length;++n)"removeListener"!==(r=i[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=s[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},501:(e,t,s)=>{"use strict";const{OPERATOR:n}=s(351);class r{constructor(e="undefined"){this.type=e}}e.exports.Operand=class extends r{constructor(e="undefined"){super("operand"),this.name=e}},e.exports.Operator=class extends r{constructor(e){switch(super("operator"),this.position=e.position,this.raw=e.data,e.data.toString()){case"+":this.op_p=n.PLUS;break;case"-":this.op_p=n.MINUS;break;case"*":this.op_p=n.MULT;break;case"/":this.op_p=n.DIVIDE;break;case">":this.op_p=n.LARGER;break;case"<":this.op_p=n.LESS;break;case">=":this.op_p=n.ELARGER;break;case"<=":this.op_p=n.ELESS;break;case"=":this.op_p=n.EQUAL;break;case"!=":this.op_p=n.NEQUAL;break;case"&":this.op_p=n.AND;break;case"|":this.op_p=n.OR}}equals(e){return this.op_p===e}toString(){return this.raw.toString()}},e.exports.ParserData=r},329:(e,t,s)=>{"use strict";const{Operand:n}=s(501),{SERVICE:r}=s(351),{NativeFunctionExecutionError:i}=s(943),{iPoonyaObject:a,iPoonyaPrototype:o,iCodeEmitter:l}=s(161);class c{constructor(e){this.target=e,this.name=e.name}result(e=null,t,s,u,d,p,h){let T=this,f=new Array,O=!0,N=t.length,S=0;function E(e){if(O)switch(O=!1,typeof e){case"bigint":s.createObject(e,-1,r.CONSTRUCTORS.INTEGER,null,new Array,h);break;case"number":s.createObject(e,-1,r.CONSTRUCTORS.NUMBER,null,new Array,h);break;case"string":s.createObject(e,-1,r.CONSTRUCTORS.STRING,null,new Array,h);break;case"symbol":s.createObject(Symbol.keyFor(e),-1,r.CONSTRUCTORS.STRING,null,new Array,h);break;case"boolean":s.createObject(e,-1,r.CONSTRUCTORS.BOOLEAN,null,new Array,h);break;case"undefined":s.createObject(e,-1,r.CONSTRUCTORS.NULL,null,new Array,h);break;case"object":switch(!0){case null===e:s.createObject(e,-1,r.CONSTRUCTORS.NULL,null,new Array,h);break;case e instanceof l:s.createObject(e,-1,r.CONSTRUCTORS.PATTERN,null,new Array,h);break;case e instanceof o||e instanceof a||e instanceof n:h(e);break;default:Array.isArray(e)?s.createObject(e,-1,r.CONSTRUCTORS.ARRAY,null,new Array,h):s.createObject(e,-1,r.CONSTRUCTORS.OBJECT,null,new Array,h)}break;case"function":h(new c(e))}}function A(){let n;try{n=T.target.call(e,{args:t,context:s,reject:p,resolve:E,position:d},...f)}catch(e){p(d,new i(T.target.name,e instanceof Error?e.stack:(new Error).stack))}n instanceof Promise?n.catch((e=>p(d,new i(T.target.name,e instanceof Error?e.stack:(new Error).stack)))).then(E):void 0!==n&&E(n)}0!=N?function e(){t[S].result(s,u,p,(t=>{t.result(s,u,p,(t=>{f[S]=t,++S>=N?A():e()}))}))}():A()}}e.exports=c},36:(e,t,s)=>{"use strict";const{FIELDFLAGS:n}=s(351),r=s(753),i=s(329);class a extends r{constructor(e=null,t,s){if(super(e),t)if(Array.isArray(t))for(let e=0,n=t.length;e<n;e++)this.push(s,t[e]);else for(let e in t)switch(typeof e){case"string":this.set(s,parseInt(e),t[e]);break;case"number":this.set(s,e,t[e])}}clone(){const e=new a(this.prototype);return e.fields=new Map(this.fields),e.field_attrs=new Map(this.field_attrs),e}push(e,t,s=new Array){this.set(e,this.fields.size,t,s)}result(e,t,s,r){let a,o=new Array(this.fields.size);for(let[r,l]of this.fields)a=this.field_attrs.get(r),null!=a&&0!=(a&n.NOOUTPUT)||(l instanceof i?o[r]=null!=l?l.target:null:null!=l&&l.result(e,t,s,(e=>o[r]=e)));r(o)}toRawData(){return`[Array:${this.prototype.name}]`}}e.exports=a},839:(e,t,s)=>{"use strict";const n=s(753);class r extends n{constructor(e=null,t){super(e),this.data=t}append(e){this.data=e}clone(){return new r(this.prototype,this.data)}set(){}remove(){}result(e,t,s,n){n(this.data)}toRawData(){return this.data}}e.exports=r},550:(e,t,s)=>{"use strict";const n=s(753);class r extends n{constructor(e=null,t){super(e),this.data=t}clone(){return new r(this.prototype,this.data)}append(e){this.data=e}set(){}remove(){}result(e,t,s,n){n(this.data)}toRawData(){return this.data}}e.exports=r},679:(e,t,s)=>{"use strict";const n=s(753);class r extends n{constructor(e=null){super(e)}clone(){return new r(this.prototype)}append(){}set(){}remove(){}result(e,t,s,n){n(null)}toRawData(){return null}}e.exports=r},220:(e,t,s)=>{"use strict";const n=s(753);class r extends n{constructor(e=null,t){super(e),this.data=t}clone(){return new r(this.prototype,this.data)}append(e){this.data=e}set(){}remove(){}result(e,t,s,n){n(this.data)}toRawData(){return this.data}}e.exports=r},753:(e,t,s)=>{"use strict";const{BadKeyInvalidTypeException:n,BadKeyProtectedFieldException:r}=s(943),{SUPER_CALL:i,GET:a,FIELDFLAGS:o,CONFIG:l}=s(351),{Cast:c}=s(88),{iPoonyaObject:u,iPoonyaPrototype:d}=s(161),p=s(329);class h extends u{constructor(e,t,s){super(),this.fields=new Map,this.field_attrs=new Map,this.raw=!1,e instanceof d&&(e[i](this),this.prototype=e),null!=t&&this.append(s,t)}clone(){const e=new h(this.prototype);return e.fields=new Map(this.fields),e.field_attrs=new Map(this.field_attrs),e}has(e){return this.fields.has(e)}remove(e){return this.fields.delete(e)&&this.field_attrs.delete(e)}get(e,t){let s=this.fields.get(e);return null!=s?s:this.prototype[a](e,t,!1)}setConstant(e){let t=0;if(null==(t=this.field_attrs.get(e)))throw new Error("Cannot find filed "+e+" in "+this.prototype.name+".Object");this.field_attrs.set(e,t|o.CONSTANT)}setHide(e){let t=0;if(null==(t=this.field_attrs.get(e)))throw new Error("Cannot find filed "+e+" in "+this.prototype.name+".Object");this.field_attrs.set(e,t|o.NOOUTPUT)}append(e,t){if("object"!=typeof t)throw new TypeError;if(Array.isArray(t))for(let s=0,n=t.length;s<n;s++)this.set(e,s,t[s],t);else if(t instanceof h)for(let s of t.fields)this.set(e,s[0],s[1]);else for(let s in t)this.set(e,s,t[s])}set(e,t,s,i=new Array){if("string"!=typeof t&&"number"!=typeof t)throw new n;const a=this.field_attrs.get(t);if(null!=a&&0==(a&o.CONSTANT))throw new r;try{this.fields.set(t,c(s,e,i))}catch(e){throw l.DEBUG&&console.error(e),new Error("Error when cast value of "+t)}}toString(e,t,s){let n=this.fields.get("toString");return null!=n?n.result(e,t,s):`[Object${this.prototype.name}]`}result(e,t,s,n){let r,i=new Object;for(let[n,a]of this.fields)r=this.field_attrs.get(n),null!=r&&0!=(r&o.NOOUTPUT)||(a instanceof p?i[n]=null!=a?a.target:null:null!=a&&a.result(e,t,s,(e=>i[n]=e)));n(i)}toRawData(){return`[Object:${this.prototype.name}]`}}e.exports=h},360:(e,t,s)=>{"use strict";const{Cast:n}=s(88),r=s(753);class i extends r{constructor(e=null,t){super(e),this.data=t}clone(){return new i(this.prototype,this.data)}get(){return null}set(){}remove(){}result(e,t,s,r){const i=this.data.result();i instanceof Promise?i.then((t=>r(n(t,e)))):i.complete().then((t=>r(n(t,e))))}toRawData(){return"[Object:Pattern]"}}e.exports=i},326:(e,t,s)=>{"use strict";const{IS:n,GET:r,FIELDFLAGS:i,SUPER_CALL:a}=s(351),{iPoonyaPrototype:o}=s(161),{Cast:l}=s(88);class c extends o{constructor(e=[],t){if(super(),null!=e.find((e=>!(e instanceof o))))throw new Error("Only descendants of iPoonyaPrototype should be specified as parents of the target class");if("string"!=typeof t&&null!=t)throw new Error("Only string value can be passed as name");this.name=null!=t?t:"Object",this._parents=[...e],this._fields_data=new Map,this._fields=new Map}clone(){const e=new c(this._parents,this.name);return e._fields=new Map(this._fields),e._fields_data=new Map(this._fields_data),e}expand(e){if(!(e instanceof o))throw new TypeError("Parent must be an iPoonyaPrototype instance.");this._parents.push(e)}addField(e,t,s,n){this._fields.set(e,l(t,n)),this._fields_data.set(e,s)}[n](e){if(e===this.name)return!0;for(let t=0,s=this._parents;t<s;t++)if(this._parents[n](e))return!0;return!1}[r](e,t,s=!0){let n;if(null!=(n=this._fields.get(e)))return s&&0==(this._fields_data.get(e)&i.STATIC)?null:n;for(let r=0,i=this._parents.length;r<i;r++)if(null!=(n=this._parents[r].get(e,t,s)))return n;return null}[a](e){for(let[t,s]of this._fields_data)e.field_attrs.set(t,s);for(let t=0,s=this._parents.length;t<s;t++)this._parents[t][a](e)}toRawData(){return`[Prototype:${this.name}]`}}e.exports=c},809:(e,t,s)=>{"use strict";const n=s(753);class r extends n{constructor(e=null,t){super(e),this.data=t}clone(){return new r(this.prototype,this.data)}append(e){this.data=e}get(e,t){let s=this.data[e];return"string"==typeof s?new r(this.prototype,s):super.get(e,t)}set(){}remove(){}result(e,t,s,n){n(this.data)}toRawData(){return this.data}}e.exports=r},515:(e,t,s)=>{"use strict";const{Operand:n,Operator:r}=s(501),{CHARTYPE:i,OPERATOR:a,SERVICE:o}=s(351),{UnableToRecognizeTypeException:l,TheSequenceException:c}=s(943),{Cast:u,Tick:d}=s(88),p=s(657);class h extends n{constructor(e,t){super("expression"),this.data=null!=t?[...t]:new Array,this.position=e,this.validated=!1}isNotDone(){return this.data[this.data.length-1]instanceof r}toString(e){return this.data.map((t=>t.toString(e))).join(" ")}append(e,t){let s;switch(e.type){case i.NUMBER:s=new p(o.CONSTRUCTORS.NUMBER,parseInt(e.data.toString()),e.position);break;case i.STRING:s=new p(o.CONSTRUCTORS.STRING,e.data.toString(),e.position);break;case i.OPERATOR:s=new r(e);break;case i.WORD:switch(e.data.toString()){case"true":s=new p(o.CONSTRUCTORS.BOOLEAN,!0,e.position);break;case"false":s=new p(o.CONSTRUCTORS.BOOLEAN,!1,e.position);break;case"null":s=new p(o.CONSTRUCTORS.NULL,null,e.position)}break;default:e instanceof r||e instanceof n?s=e:t(e.position,new l(e.type))}0!==this.data.length?(s instanceof r&&this.data[this.data.length-1]instanceof r||s instanceof n&&this.data[this.data.length-1]instanceof n)&&t(e.position,new c(s,this.data[this.data.length-1])):s instanceof r&&t(e.position,new c(s,"[ExpressionStart]")),this.data.push(s)}complete(e){if(this.data.filter((e=>e.op_p===a.MULT||e.op_p===a.DIVIDE)).length>0){let t=!1,s=Array.from(this.data),n=null;this.data.splice(0,this.data.length);for(let r=0,i=s.length;r<i;r++){if(s[r+1]&&"operator"===s[r+1].type)switch(s[r+1].op_p){case a.MULT:case a.DIVIDE:if(t)break;t=!0,n=new h(s[r+1].position),this.append(n,e);break;case a.PLUS:case a.MINUS:case a.EQUAL:case a.LARGER:case a.LESS:case a.OR:case a.AND:if(!t)break;t=!1,n.append(s[r],e),n.complete(),n=null;continue}t?n.append(s[r],e):this.append(s[r],e)}}if(this.data.filter((e=>e.op_p===a.AND)).length>0){let t=Array.from(this.data),s=new h(t[0].position);this.data.splice(0,this.data.length);for(let n=0,r=t.length;n<r;n++)t[n]&&"operator"===t[n].type&&t[n].op_p===a.AND?(s.complete(),this.append(s,e),this.append(t[n],e),s=new h(t[n].position)):s.append(t[n],e);s.complete(),this.append(s,e)}if(this.data.filter((e=>e.op_p===a.OR)).length>0){let t=Array.from(this.data),s=new h(t[0].position);this.data.splice(0,this.data.length);for(let n=0,r=t.length;n<r;n++)t[n]&&"operator"===t[n].type&&t[n].op_p===a.OR?(s.complete(),this.append(s,e),this.append(t[n],e),s=new h(t[n].position)):s.append(t[n],e);s.complete(),this.append(s,e)}this.validated=!0}result(e,t,s,n){let r=this,i=1,o=r.data.length,l=null;function c(){r.data[i+1].result(e,t,s,(t=>{switch(!0){case r.data[i].equals(a.PLUS):l+=t.toRawData();break;case r.data[i].equals(a.MINUS):l-=t.toRawData();break;case r.data[i].equals(a.MULT):l*=t.toRawData();break;case r.data[i].equals(a.DIVIDE):l/=t.toRawData();break;case r.data[i].equals(a.LARGER):l=l>t.toRawData();break;case r.data[i].equals(a.LESS):l=l<t.toRawData();break;case r.data[i].equals(a.EQUAL):l=l==t.toRawData();break;case r.data[i].equals(a.ELARGER):l=l>=t.toRawData();break;case r.data[i].equals(a.ELESS):l=l<=t.toRawData();break;case r.data[i].equals(a.NEQUAL):l=l!=t.toRawData();break;case r.data[i].equals(a.AND):if(l=l&&t.toRawData(),!l)return l;break;case r.data[i].equals(a.OR):if(l=l||t.toRawData(),l)return l}(i+=2)>=o?n(u(l,e)):d(c)}))}r.data[0].result(e,t,s,(i=>{i.result(e,t,s,(t=>{l=t,r.data.length>1?c():n(u(l,e))}))}))}}e.exports=h},79:(e,t,s)=>{"use strict";const{Operand:n}=s(501),{UnableToCreateAnObjectException:r,FieldNotAFunctionException:i}=s(943),{iPoonyaPrototype:a}=s(161),o=s(329);e.exports=class extends n{constructor(e,t,s){super("call function"),this.query_stack=[...e],this.position=s,this.args=t}result(e,t,s,n){e.getByPath(this.query_stack,this.position,null,s,!0,(l=>{l.instance instanceof o?l.instance.result(l.parent,this.args,e,t,this.position,s,n):l.instance instanceof a?s(this.position,new r):s(this.position,new i(this.query_stack[this.query_stack.length-1]))}))}toString(){return"("+this.query_stack.join(" => ")+") <== ("+this.args.join(", ")+")"}}},346:(e,t,s)=>{"use strict";const{Operand:n}=s(501),{SERVICE:r,FIELDFLAGS:i}=s(351),a=s(329);e.exports=class extends n{constructor(e,t){super("get"),this.position=e,this.query_stack=t}result(e,t,s,n){e.getByPath(this.query_stack,this.position,null,s,!0,(o=>{if(null!=o.instance){if(o.instance instanceof a)return 0!=(o.flags&i.PROPERTY)?o.instance.result(o.parent,[],e,t,this.position,s,n):e.createObject(`[NativeCode:${o.instance.name}]`,this.position,r.CONSTRUCTORS.STRING,s,new Array,n);n(o.instance)}else e.createObject(null,this.position,r.CONSTRUCTORS.NULL,s,new Array,n)}))}toString(){return"("+this.query_stack.join(" => ")+")"}}},657:(e,t,s)=>{"use strict";const{Operand:n}=s(501),{SERVICE:r}=s(351);class i extends n{constructor(e,t,s){super("object-creator"),this.query_stack=null!=e?e:r.CONSTRUCTORS.OBJECT,this.initial=t,this.position=s}toString(e="\t"){if(this.initial instanceof Map){const t=[...this.initial.entries()];return"new ("+this.query_stack.map((e=>"string"!=typeof e?`[${e.toString()}]`:e.toString())).join(" => ")+") -> "+(t.length>0?"\n"+t.map(((s,n)=>s[1]instanceof i?e+s[0]+" -> "+s[1].toString(e+"\t"):e+s[0]+" -> "+s[1].toString(e+"\t")+(n+1!=t.length?",":""))).join("\n"):"*")}return`(${this.initial}) <- (${this.query_stack.map((e=>"string"!=typeof e?`[${e.toString()}]`:e.toString())).join(" => ")})`}result(e,t,s,n){e.createObject(this.initial,this.position,this.query_stack,s,new Array,n)}}e.exports=i},923:(e,t,s)=>{"use strict";const{Operand:n}=s(501);e.exports=class extends n{constructor(e,t,s){super("ternar"),this.condition=e,this.v_o=t,this.v_t=s}toString(e){return"< "+this.condition.toString(e+"\t")+" > ? "+this.v_o+" : "+this.v_t}result(e,t,s,n){const r=this;r.condition.result(e,t,s,(i=>{e.toBooleanResult(i)?r.v_o.result(e,t,s,n):r.v_t.result(e,t,s,n)}))}}},602:(e,t,s)=>{"use strict";const{Tick:n}=s(88);e.exports=class{constructor(e,t,s){this.condition=e,this.body_true=t,this.body_false=s}toString(e){return"if ("+this.condition.toString(e)+") "+this.body_true.toString(e)+(null!=this.body_false?" else "+this.body_false.toString(e):"")}result(e,t,s,r){const i=this;i.condition.result(e,t,s,(a=>{e.toBooleanResult(a)?i.body_true.result(e,t,s,r):null!=i.body_false?i.body_false.result(e,t,s,r):n(r,null)}))}}},254:(e,t,s)=>{"use strict";const{Tick:n}=s(88);e.exports=class{constructor(e){this.expression=e,this.position=e.position}toString(){return"> "+this.expression.toString()}result(e,t,s,r){this.expression.result(e,t,s,(i=>{null!=i?i.result(e,t,s,(e=>{t.write(e),n(r,e)})):n(r,null)}))}}},505:(e,t,s)=>{"use strict";const n=s(36),{Tick:r}=s(88),{TheFieldMustBeAnArrayInstanceExceprion:i}=s(943);e.exports=class{constructor(e,t,s){this.query_stack=t,this.position=e,this.value=s}toString(e){return"("+this.query_stack.map((e=>"number"==typeof e?`[${e}]`:e)).join(" => ")+") <- "+this.value.toString(e+"\t")}result(e,t,s,a){const o=this;e.getByPath(o.query_stack,o.position,n,s,!1,(n=>{null!=n?o.value.result(e,t,s,(t=>{n.push(e,t),r(a,t)})):s(o.position,new i(o.query_stack[0]))}))}}},91:(e,t,s)=>{"use strict";const{TheFieldMustBeNumberException:n}=s(943),{Tick:r}=s(88),i=s(220);e.exports=class{constructor(e,t,s){this.from=e,this.to=t,this.body=s}toString(e){return"repeat ("+this.from.toString(e)+"; "+this.to.toString(e)+") "+this.body.toString(e)}result(e,t,s,a){let o,l=this;l.from.result(e,t,s,(c=>{l.to.result(e,t,s,(u=>{c instanceof i||s(l.from.position,new n("From")),u instanceof i||s(l.to.position,new n("To")),c.result(e,t,s,(n=>{u.result(e,t,s,(i=>{function c(t){n+=o,e.popLevel(),r(u,t,o)}function u(o){n!=i?(e.addLevel(),e.set("current",n,"up"),l.body.result(e,t,s,c,!1)):r(a,o)}o=n<i?1:-1,n=Math.floor(n),i=Math.floor(i),u()}))}))}))}))}}},498:(e,t,s)=>{"use strict";const n=s(515),{iPoonyaObject:r,iPoonyaPrototype:i,iContext:a}=s(161),{GetFieldOfNullException:o,TheFieldNotHasDeclaredExceprion:l}=s(943),{GET:c}=s(351),{Tick:u}=s(88),d=s(753);e.exports=class{constructor(e,t,s){this.query_stack=t,this.position=e,this.value=s}toString(e){return"("+this.query_stack.map((e=>"number"==typeof e?`[${e}]`:e)).join(" => ")+") = "+this.value.toString(e+"\t")}result(e,t,s,p){let h=this,T=e,f=Array.from(h.query_stack),O=f.length,N=0;function S(n){++N<O?(T instanceof d?T=T.get(n,e):T instanceof a?T=T.get(n):T instanceof i?T=T[c](n,e):s(h.position,new o(n)),E()):T instanceof r||T instanceof a?h.value.result(e,t,s,(t=>{T instanceof a?T.has(n)?T.set(n,t):s(h.position,new l(n)):T.set(e,n,t),u(p,t)})):s(h.position,new o(f[N-1]))}function E(){f[N]instanceof n?f[N].result(e,null,s,(e=>S(e.toRawData()))):S(f[N])}E()}}},938:(e,t,s)=>{"use strict";const{Tick:n}=s(88);e.exports=class{constructor(){this.Sequence=new Array}push(e){this.Sequence.push(e)}result(e,t,s,r,i=!0){let a=this,o=0,l=a.Sequence.length;function c(e){n(u,e)}function u(u){if(o>=l)return i&&e.popLevel(),void n(r,u);a.Sequence[o++].result(e,t,s,c)}i&&e.addLevel(),u()}toString(e=0){return`{\n${e}${this.Sequence.map((t=>t.toString(e+"\t"))).join("\n\n"+e)}\n${e.substring(0,e.length-1)}}`}}},404:(e,t,s)=>{"use strict";const{Tick:n}=s(88);e.exports=class{constructor(e){this.Sequence=Array.isArray(e)?e:new Array}push(e){this.Sequence.push(e)}result(e,t,s,r){let i=this,a=0,o=i.Sequence.length;function l(e){n(c,e)}function c(c){a>=o?c&&"function"==typeof c.result?c.result(e,t,s,(e=>{n(r,e)})):n(r,c):i.Sequence[a++].result(e,t,s,l)}c()}toString(e="\t"){return`{\n${e}${this.Sequence.map((t=>t.toString(e+"\t"))).join("\n\n"+e)}\n${e.substring(0,e.length-1)}}`}}},859:(e,t,s)=>{"use strict";const{TheFieldAlreadyHasBeenDeclaredException:n}=s(943),{Tick:r}=s(88);e.exports=class{constructor(e,t){this.name=e.toString(),this.position=e.position,this.value=t}toString(e){return"set "+this.name+" = "+this.value.toString(e+"\t")}result(e,t,s,i){const a=this;e.has(a.name,"up")?s(a.position,new n(a.name)):a.value.result(e,t,s,(t=>{e.set(a.name,t,"up"),r(i,t)}))}}},267:(e,t,s)=>{"use strict";const{Tick:n}=s(88);e.exports=class{constructor(e,t){this.condition=e,this.body=t}toString(e){return"while ("+this.condition.toString(e)+") "+this.body.toString(e)}result(e,t,s,r){let i=this;!function a(o){i.condition.result(e,t,s,(l=>{e.toBooleanResult(l)?i.body.result(e,t,s,a):n(r,o)}))}()}}},943:(e,t,s)=>{"use strict";const{SERVICE:n}=s(351),{dirname:r}=s(386);class i{constructor(e,t){this.message="PoonyaException / "+e+(null!=t?": \n"+t:"")}toString(){return this.message}}class a extends i{constructor(e,t){super("Parser exception / "+e,t)}}class o extends i{constructor(e,t){super("Linker exception / "+e,t)}}class l extends o{constructor(e){super("An error occured while opening file: '"+e+"'")}}e.exports.IOError=l,e.exports.LinkerIOError=class extends l{constructor(e){super(e)}},e.exports.LinkerException=o,e.exports.PoonyaException=i,e.exports.ParserException=a,e.exports.TheSequenceException=class extends a{constructor(e,t){super(`Wrong order: condition operator: '${e.toString()}' after '${t.toString()}'`)}},e.exports.ParserLogicException=class extends a{constructor(){super("The expression has incorrect logic")}},e.exports.GetFieldOfNullException=class extends i{constructor(e){super(`Cannot get property '${e}' of null`)}},e.exports.BadEmptyObjectException=class extends a{constructor(){super("Cannot create an empty object after declaring its keys")}},e.exports.UnexpectedTokenException=class extends a{constructor(e,t){super(`Unexpected token '${e.toString()}' when expected '${t.toString()}'`)}},e.exports.UnexpectedTokenStatement=class extends a{constructor(e,t,s){super(`Error parsing the '${e.toString()}' statement. Expected '${s.toString()}', when actually: '${t.toString()}'`)}},e.exports.FieldNotAFunctionException=class extends i{constructor(e){super(`The field '${e}' is not a function`)}},e.exports.BadKeyInvalidTypeException=class extends i{constructor(){super("Wrong key type: it can be set only by a numeric or string key")}},e.exports.IsNotAConstructorException=class extends i{constructor(e){super(`${e.map((e=>"number"==typeof e?"["+e+"]":e.toString())).join(" -> ")} - not a constructor`)}},e.exports.ParserEmtyArgumentException=class extends a{constructor(){super("It is not possible to pass an empty argument to a function, use null to denote an empty value")}},e.exports.LinkerPathNotGiveException=class extends o{constructor(){super("To use include, you must pass the path to the current execution file")}},e.exports.CriticalParserErrorException=class extends a{constructor(){super("Critical parser error")}},e.exports.NativeFunctionExecutionError=class extends i{constructor(e,t){const s=/^\s*at\s(?:new\s)?([aA-zZ.аА-яЯё]+)\s\((.*)\)$/;for(let e,i=0,a=(t=t.split("\n")).length;i<a;i++)if(s.test(t[i])&&(e=t[i].match(s),"NativeFunction.result"===e[1]&&n.ROOTPATH==r(e[2]).substring(0,n.ROOTPATH.length))){t=t.slice(0,i);break}super("Critical error while executing a native function '"+e+"'","* > \t"+t.join("\n * > \t"))}},e.exports.BadKeyProtectedFieldException=class extends i{constructor(){super("Cannot set this field, the field is protected from changes")}},e.exports.TheFieldMustBeNumberException=class extends i{constructor(e){super(`'${e}' must be a number, or a container containing a number`)}},e.exports.NativeFunctionReturnValueError=class extends i{constructor(){super("Function can only return simple types")}},e.exports.UnableToRecognizeTypeException=class extends a{constructor(e){super(`Unable to recognize type '${e}'`)}},e.exports.TheFieldNotHasDeclaredExceprion=class extends i{constructor(e){super(`Field '${e}' is not declared`)}},e.exports.UnableToCreateAnObjectException=class extends i{constructor(){super("Unable to create an object by calling its constructor as a function, pick ConstructorName -> *;")}},e.exports.BadArrowNotationJumpingTwoLevels=class extends a{constructor(){super("Bad array notation: jumping two levels is not possible")}},e.exports.UnexpectedWordTypeAndGetException=class extends a{constructor(e,t){super(`Expected word type expression and get ${e}[${t}]`)}},e.exports.ParserUnfinishedNotationException=class extends a{constructor(){super("Parser fault: unfinished notation")}},e.exports.BadArrowNotationJumpingToUpperLevel=class extends a{constructor(){super("Bad array notation: unexpected transition to a upper level")}},e.exports.TheFieldMustBeAnArrayInstanceExceprion=class extends i{constructor(e){super(`Field '${e}' must be an Array instance`)}},e.exports.TheFieldAlreadyHasBeenDeclaredException=class extends i{constructor(e){super(`The '${e}' field is already declared`)}},e.exports.SegmentationFaultEmptyArgumentException=class extends a{constructor(e){super("Segmentation fault: empty argument for "+e)}},e.exports.InvalidSequenceForLetiableAccessException=class extends a{constructor(){super("Invalid sequence for letiable access")}},e.exports.CriticalParserErrorUnexpectedEndOfExpression=class extends a{constructor(){super("Critical parser error: unexprected end of expression")}},e.exports.CriticalParserErrorUnexpectedEndOfInputException=class extends a{constructor(){super("Critical parser error: unexpected end of input")}},e.exports.CriticalParserErrorNoRawDataTransmittedException=class extends a{constructor(){super("Critical parser error: no raw data transmitted")}},e.exports.SegmentationFaultMaximumSegmentsForBlockException=class extends a{constructor(e){super("Segmentation fault exceeded the maximum number of segments for block "+e)}}},161:e=>{"use strict";e.exports.iContext=class{},e.exports.iPathData=class{constructor(){}},e.exports.iInputData=class{constructor(){}},e.exports.iCodeEmitter=class{},e.exports.iPoonyaObject=class{},e.exports.iPoonyaPrototype=class{},e.exports.iPoonyaConstructsData=class{constructor(){}}},351:(e,t,s)=>{"use strict";const{EventEmitter:n}=s(138),r=Symbol("GET"),i=Symbol("IS"),a=Symbol("SEPER_CALL"),o=Symbol.for("POONYA-"+Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)+"-win32"),l={CONSTRUCTORS:{OBJECT:["Object"],ARRAY:["Array"],BOOLEAN:["Boolean"],STRING:["String"],NUMBER:["Number"],INTEGER:["Integer"],NULL:["Null"],PATTERN:["Pattern"]},CONFIG:{DEBUG:!1},LOADED:!1,ACTIONS:new n,get SPACE(){return s.g[o]}};l.ACTIONS.on("load",(()=>l.LOADED=!0)),e.exports.FIELDFLAGS={NOOUTPUT:1,CONSTANT:2,STATIC:4,PROPERTY:8},e.exports.SUPER_CALL=a,e.exports.NAMESPACE=o,e.exports.OPERATOR={PLUS:0,MINUS:1,MULT:2,DIVIDE:3,EQUAL:4,NEQUAL:5,LARGER:6,LESS:7,ELARGER:8,ELESS:9,AND:10,OR:11},e.exports.CHARTYPE={START:0,NUMBER:2,WORD:3,SPACE:4,POINT:5,STRING:6,NEWLINE:7,OPERATOR:8},e.exports.SERVICE=l,e.exports.CONFIG=l.CONFIG,e.exports.GET=r,e.exports.IS=i},591:(e,t,s)=>{"use strict";const n=s(360),{GetFieldOfNullException:r,IsNotAConstructorException:i,PoonyaException:a}=s(943),{GET:o,SERVICE:l,IS:c}=s(351),{Cast:u,toBytes:d}=s(88),{iContext:p,iPoonyaPrototype:h,iPathData:T,iCodeEmitter:f,iPoonyaObject:O}=s(161),{PoonyaStaticLibrary:N}=s(742),{parser:S}=s(743),E=s(94),A=s(329),y=s(515),w=s(753),m=s(36),g=s(550),R=s(220),C=s(809),b=s(839),x=s(679);class P extends Map{constructor(e,t){super(),null!=t&&this.append(e,t)}append(e,t){if("object"!=typeof t)throw new TypeError;if(Array.isArray(t))for(let s=0,n=t.length;s<n;s++)this.set(e,s,t[s]);else if(t instanceof w)for(let s of t.fields)this.set(e,s[0],s[1]);else if(t instanceof P)for(let s of t)this.set(e,s[0],s[1]);else for(let s in t)this.set(e,s,t[s])}get(e){return super.get(e)}set(e,t,s,n=new Array){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("Bad key "+t);try{super.set(t,u(s,e,n))}catch(e){console.error("Error when cast value of "+t)}}result(e,t,s){let n=new Object;for(let[r,i]of this)n[r]=i instanceof A?null!=i?i.result(e,t,s):null:null!=i?i.target:null;return n}}class F extends p{constructor(e,t,...s){super(),this.levels=new Array,this._lib_cache=new Array,null!=e&&this.import(e,t),this.levels.push(...s.map((e=>e instanceof P?e:"object"==typeof e?new P(this,e):null)).filter((e=>null!==e)))}import(e,t){if(null!=e){this.addLevel();for(let s,n=0,r=e.length;n<r;n++)e[n]instanceof N&&!this._lib_cache.includes(e[n].namespace)&&(e[n].global?e[n].importTo(this.levels[0],this,t):(this.createObject(null,-1,l.CONSTRUCTORS.OBJECT,t,new Array,(e=>s=e)),e[n].importTo(s,this,t),this.levels[0].set(this,e[n].namespace,s)),this._lib_cache.push(e[n].namespace))}}eval(e,t){return new Promise(((s,n)=>{S(E(d(e),!1),((e,t)=>{throw new a(t+", at symbol "+e)}),"eval-"+Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).catch((e=>n(e))).then((e=>{e.result(this,t,((e,t)=>n(new a(t+", at symbol "+e))),s)}))}))}clone(){const e=new F(null,null,...this.levels);return e._lib_cache=Array.from(this._lib_cache),e}addLevel(e){let t=-1;if(null!=e){if(!(e instanceof P))throw new Error("The level for the context must be heap, or indexed by the heap");t=this.levels.push(e)-1}else t=this.levels.push(new P(this,null))-1;return t}popLevel(e,t=!0){null!=e?this.levels.splice(e,t?1/0:1):this.levels.pop()}get(e){let t=null,s=this.levels.length-1;for(;s>=0&&null==(t=this.levels[s--].get(e)););return t}has(e,t="tree"){switch(t){case"tree":return null!==this.get(e);case"up":return this.levels[this.levels.length-1].has(e);case"root":return this.levels[0].has(e)}}set(e,t,s="tree"){let n;switch(s){case"tree":for(n=this.levels.length;--n>=0;)if(null!=this.levels[n].get(e))return void this.levels[n].set(this,e,t);this.levels[this.levels.length-1].set(this,e,t);break;case"up":this.levels[this.levels.length-1].set(this,e,t);break;case"down":this.levels[0].set(this,e,t)}}getByPath(e,t,s=null,n,i=!1,a){let l=this,c=l,u=null,d=0,p=Array.from(e),f=p.length,O=0;function N(e){c instanceof w?(u=c,d=c.field_attrs.get(e),c=c.get(e,l)):c instanceof F?(u=c,c=c.get(e,l)):c instanceof h?c=c[o](e,l):n(t,new r(e)),++O<f?S():a(null==s||c instanceof s?i?Object.assign(new T,{instance:c,parent:u,index:O,flags:d}):c:null)}function S(){p[O]instanceof y?p[O].result(l,null,n,(e=>{N(e.toRawData())})):N(p[O])}S()}toBooleanResult(e){return e instanceof b?e.data:e instanceof g||e instanceof R?0!=e.data:!(e instanceof x)&&(e instanceof w||e instanceof m||(e instanceof C?0!=e.data.length:null!=e))}createObject(e,t,s,r,a=new Array,o){const l=this;l.getByPath(s,t,h,r,!1,(u=>{let d=new Object,p=0,T=e instanceof Map?Array.from(e.entries()):"object"==typeof e&&null!=e?Object.entries(e):null;function N(){switch(!0){case u[c]("String"):return void o(new C(u,d,l));case u[c]("Integer"):return void o(new g(u,d,l));case u[c]("Boolean"):return void o(new b(u,d,l));case u[c]("Number"):return void o(new R(u,d,l));case u[c]("Null"):return void o(new x(u,d,l));case u[c]("Array"):return void o(new m(u,d,l));case u[c]("Pattern"):o(new n(u,d,l));break;default:return void o(new w(u,d,l))}}function S(){const e=T[p++];null!=e?a.includes(e[1])?S():e[1]instanceof h||e[1]instanceof O?d[e[0]]=e[1].result(l,null,r,(t=>E(e[0],t))):E(e[0],e[1]):N()}function E(e,t){d[e]=t,S()}null!=u?"object"!=typeof T||null==T||e instanceof f?(d=e,N()):S():r(t,new i(s))}))}}e.exports.Context=F,e.exports.Heap=P},742:(e,t,s)=>{"use strict";const{NAMESPACE:n,SERVICE:r}=s(351),{IOError:i}=s(943),a=s(329),o=s(326),l=Symbol.for("Modules");null==s.g[n]&&(s.g[n]=new Object),null==s.g[n][l]&&(s.g[n][l]=new Map);class c{constructor(e,t=!1,r=!1,i){u(e,this,r),this.namespace=null!=i?i:"space-"+s.g[n][l].size.toString(16)+(t?"-global":""),this.global=Boolean(t),this._fields=new Map}addField(e,t){if(e=String(e),this._fields.has(e))throw new Error('The "'+e+'" field alredy exists');this._fields.set(e,t)}expandPrototype(e){if(!Object.prototype.isPrototypeOf.call(o,e))throw new Error("Only PoonyaPrototype instance can be passed as a prototype.");this._fields.has(e.name)?this._fields.get(e.name).expand(e):this._fields.set(e.name,e)}addLib(e){const t=s.g[n][Symbol.for("Modules")][Symbol.for(e)];if(null==t)throw new Error(`Can't find library with identifier ${e}`);this._fields.set(t.namespace,t)}importTo(e,t,s){for(let[n,i]of this._fields)switch(typeof i){case"bigint":isNaN(i)?t.createObject(null,-1,r.CONSTRUCTORS.NULL,s,new Array,(s=>e.set(t,n,s))):t.createObject(i,-1,r.CONSTRUCTORS.INTEGER,s,new Array,(s=>e.set(t,n,s)));break;case"number":isNaN(i)?t.createObject(null,-1,r.CONSTRUCTORS.NULL,s,new Array,(s=>e.set(t,n,s))):t.createObject(i,-1,r.CONSTRUCTORS.NUMBER,s,new Array,(s=>e.set(t,n,s)));break;case"string":t.createObject(i,-1,r.CONSTRUCTORS.STRING,s,new Array,(s=>e.set(t,n,s)));break;case"symbol":t.createObject(Symbol.keyFor(i),-1,r.CONSTRUCTORS.STRING,s,new Array,(s=>e.set(t,n,s)));break;case"function":Object.prototype.isPrototypeOf.call(o,i)?e.set(t,(i=new i(t)).name,i):e.set(t,n,new a(i));break;case"boolean":t.createObject(i,-1,r.CONSTRUCTORS.BOOLEAN,s,new Array,(s=>e.set(t,n,s)));break;case"undefined":case"object":null==i?t.createObject(null,-1,r.CONSTRUCTORS.NULL,s,new Array,(s=>e.set(t,n,s))):i instanceof c?t.createObject(null,-1,r.CONSTRUCTORS.OBJECT,s,new Array,(r=>{i.importTo(r,t,s),e.set(t,n,r)})):i instanceof Array?t.createObject(i,-1,r.CONSTRUCTORS.ARRAY,s,new Array,(s=>e.set(t,n,s))):t.createObject(i,-1,r.CONSTRUCTORS.OBJECT,s,new Array,(s=>e.set(t,n,s)))}}}let u=(e,t,r=!1)=>{if(!r&&null!=s.g[n][l][e=Symbol.for(e)])throw new TypeError("Library, with this id already imported. For "+e.toString());s.g[n][l][e]=t},d=async()=>{};function p(e){if("poonya"===e)return s(40);throw new Error("Unknown module "+e)}d=(e,t)=>{const s=e+"/"+t;return new Promise(((e,t)=>{try{fetch(s,{method:"GET"}).then((e=>e.text())).then((t=>e(new Function("require",`"use strict";${wait}`)(p))))}catch(e){t(new i(s))}}))},e.exports.Import=e=>{if(!(e instanceof Array))throw new TypeError("import_statements must be Array");const t=new Array;for(let r=0,i=e.length;r<i;r++)t.push(s.g[n][l][Symbol.for(e[r])]);return t},e.exports.ImportFile=d,e.exports.PoonyaStaticLibrary=c},359:(e,t,s)=>{"use strict";const{CHARTYPE:n}=s(351),{fromBytes:r}=s(88);e.exports=class{constructor(e,t,s,n){this.type=e,this.data=r(t),this.position=s-t.length>0?s-t.length+1:0,this.leng=t.length,this.string_separator=null!=n?String.fromCharCode(n):null}equals(e,t){return e==this.type&&(null==t||(Array.isArray(t)?t.includes(this.toString()):this.toString()==t))}contentEquals(e){return Array.isArray(e)?e.includes(this.toRawString()):this.toRawString()==e}toString(){return this.type!=n.STRING?this.data:this.string_separator+this.data+this.string_separator}toRawString(){return this.data}}},94:(e,t,s)=>{"use strict";const{CHARTYPE:n}=s(351),r=s(359);e.exports=function(e,t=!0){if(!Array.isArray(e))throw TypeError("Only array-like data can be input to the lexer");let s=new Array,i=!1,a=!1,o=!1,l=null,c=null,u=null;const d=new Array,p=()=>{s.splice(0,s.length)},h=t=>{s.push(e[t-1],e[t])},T=(...e)=>e.includes(s[1]),f=(...e)=>e.includes(s[s.length-1]);for(let O=1,N=e.length;O<N;O+=2){switch(e[O]){case 32:case 9:c=n.SPACE;break;case 46:c=n.POINT;break;case 10:case 13:c=n.NEWLINE;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:c=n.NUMBER;break;case 34:case 39:case 96:c=n.STRING;break;case 60:case 61:case 62:case 63:case 43:case 44:case 45:case 47:case 40:case 41:case 42:case 59:case 58:case 38:case 123:case 124:case 125:case 91:case 93:case 33:c=n.OPERATOR;break;default:c=n.WORD}if(c===n.NEWLINE&&u===n.NEWLINE||c===n.POINT&&u===n.NUMBER||c===n.NUMBER&&u===n.WORD)h(O);else if(c===n.NUMBER&&u===n.OPERATOR&&T(43,45))u=c,h(O);else{if(c===n.OPERATOR&&u===n.OPERATOR){if(2===s.length&&T(33,60,62)&&61===e[O]){if(h(O),(t||u!==n.SPACE)&&d.push(new r(u,s,O,l)),l=null,p(),u=void 0,O+1===N)return d;continue}if(2===s.length&&T(47)){if(47===e[O]){a=!0,o=!1;continue}if(62===e[O]){a=!0,o=!0;continue}}}if(i||a)if(a){if(o){if(47===e[O]&&f(60)){a=!1,u=void 0,p();continue}}else if(c===n.NEWLINE){a=!1,u=n.NEWLINE,p();continue}h(O)}else{if(c===n.STRING&&e[O]===l){i=!1,u=c;continue}h(O),u=c}else{if(c===u&&u!==n.STRING&&u!==n.OPERATOR||null==u||((t||u!==n.SPACE)&&d.push(new r(u,s,O,l)),l=null,p()),c===n.STRING){i=!0,l=e[O],u=c;continue}h(O),u=c}}}return(t||c!==n.SPACE)&&d.push(new r(c,s,e.length-s.length-1,l)),d}},434:(e,t,s)=>{"use strict";const{maybeEquals:n}=s(88),{CHARTYPE:r}=s(351),{IOError:i}=s(943),a=s(943),o=s(94);e.exports=async function(e,t,s){for(let i=0;;i++){if(null==e[i])return e;if(e[i].equals(r.WORD,"include")&&n(e,i+1,r.NEWLINE)&&e[i+1].equals(r.STRING)){let n,l;if(n=window.location.origin+"/"+t.split("/").slice(0,-1).join("/")+"/"+e[i+1].data.toString(),l=fetch(n,{method:"GET"}).then((e=>e.blob)),null!=t)try{e.splice(i,e[i+2].equals(r.OPERATOR,";")?3:2,...o(await l,!1))}catch(t){s(e[i].position,new a.LinkerIOError(n))}else s(e[i].position,new a.LinkerPathNotGiveExceptrion)}}}},743:(e,t,s)=>{"use strict";const{PoonyaException:n,BadEmptyObjectException:r,ParserEmtyArgumentException:i,UnexpectedTokenException:a,BadArrowNotationJumpingToUpperLevel:o,BadArrowNotationJumpingTwoLevels:l,ParserLogicException:c,InvalidSequenceForLetiableAccessException:u,CriticalParserErrorUnexpectedEndOfInputException:d,SegmentationFaultEmptyArgumentException:p,SegmentationFaultMaximumSegmentsForBlockException:h,UnexpectedTokenStatement:T,UnexpectedWordTypeAndGetException:f,CriticalParserErrorException:O,CriticalParserErrorNoRawDataTransmittedException:N,CriticalParserErrorUnexpectedEndOfExpression:S,ParserUnfinishedNotationException:E}=s(943),{maybeEquals:A,countKeys:y}=s(88),{CHARTYPE:w,SERVICE:m}=s(351),g=s(79),R=s(657),C=s(923),b=s(515),x=s(346),P=s(602),F=s(938),v=s(254),L=s(267),j=s(91),I=s(859),_=s(498),U=s(505),k=s(404),q=s(434);function D(e,t,s,n,r){const i=W(t,s,n,",",1/0,`(${e.map((e=>"number"==typeof e?`[${e}]`:e)).join(" => ")})()`);return{data:new g(e,i.data,r),jump:i.jump}}function M(e,t,s,n,i=0){let c=null,u=0,d=new Array([]),p=t,h=0;for(let T=t;;T++)switch(!0){case void 0===s[T]||3===h&&!s[T].equals(w.OPERATOR,",")||s[T].equals(w.OPERATOR,[";",")"]):return 2!==d[d.length-1].length&&n(s[T].position,new E),{data:new R(e,new Map(d),s[t].position),jump:T-t};case s[T].equals(w.OPERATOR,"*")&&0===h:return 1!==d.length&&n(s[T].position,new r),{data:new R(e,new Map,s[t].position),jump:T-t};case s[T].equals(w.NEWLINE):continue;default:switch(h){case 0:s[T].equals(w.WORD)||s[T].equals(w.STRING)?d[d.length-1][0]=s[T].toRawString():s[T].equals(w.NUMBER)?d[d.length-1][0]=parseInt(s[T].toRawString()):n(s[T].position,new a(s[T],"[Word]")),h=1;continue;case 1:if(u=y(s,T,w.OPERATOR,"-"),u===i+1)T+=u,s[T].equals(w.OPERATOR,">")||n(s[T].position,new a(s[T],">")),h=2;else{if(d.pop(),u<i+1)return{data:new R(e,new Map(d),s[t].position),jump:p-t};n(s[T].position,new o)}continue;case 2:u=y(s,T+1,w.OPERATOR,"-"),null!=s[T+i+3]&&(s[T].equals(w.WORD)||s[T].equals(w.NUMBER))&&u===i+2&&s[T+i+3].equals(w.OPERATOR,">")?(c=M(m.CONSTRUCTORS.OBJECT,T,s,n,i+1),T+=c.jump-1,d[d.length-1][1]=c.data,h=3):u>i+2?n(s[T+1].position,new l):(c=$(T,s,n,[",",";"]),d[d.length-1][1]=c.data,h=3,s[T].equals(w.OPERATOR,";")?T+=c.jump-2:T+=c.jump-1);continue;case 3:d.push([]),p=T,h=0;continue}}}function B(e,t,s,n){let r=0,a=new Array,o=new Array;function l(e){0!==a.length?(o.push($(0,a,n).data),a.splice(0,a.length)):n(null!=e?e.position:s[t],new i)}for(let u=t;;u++)switch(!0){case void 0===s[u]||s[u].equals(w.OPERATOR,";")||s[u].equals(w.NEWLINE)||s[u].equals(w.OPERATOR,")")&&r<=0:return l(s[u]),void 0!==o[0]&&void 0!==o[1]||n(s[t].position,new i),{data:new C(e,o[0],o[1]),jump:u-t-(s[u]&&s[u].equals(w.OPERATOR,")")?1:0)};case s[u].equals(w.OPERATOR,"("):a.push(s[u]),r++;break;case s[u].equals(w.OPERATOR,")"):a.push(s[u]),r--;break;case s[u].equals(w.OPERATOR,":")&&0===r&&0===o.length:l(s[u]);break;case s[u].equals(w.OPERATOR,":")&&0===r&&0!==o.length:n(s[u].position,new c);break;default:a.push(s[u])}}function G(e,t,s){let n=new Array,r=!0,i=0,a=0;if(0===t.length)return{data:[],jump:0};for(let o=e;;o++)switch(!0){case null==t[o]||t[o].equals(w.OPERATOR)&&!t[o].equals(w.OPERATOR,["[","]"])||t[o].equals(w.NEWLINE)||t[o].equals(w.SPACE):return{data:n,jump:o-e};case t[o].equals(w.WORD)&&r:n.push(t[o].toString()),r=!r;continue;case t[o].equals(w.POINT)&&!r:r=!r;continue;case t[o].equals(w.OPERATOR,"[")&&!r:for(o++,i=0,a=o;null!=t[o]&&(!t[o].equals(w.OPERATOR,"]")||0!==i);)t[o].equals(w.OPERATOR,"[")?i++:t[o].equals(w.OPERATOR,"]")&&i--,o++;0!=i&&s(t[o].position,new c),n.push($(0,t.slice(a,o),s).data);continue;default:s(t[o].position,new u);continue}}function $(e,t,s,n=";"){if(0===t.length)return{data:new b(0),jump:0};const r=new b(t[0].position),i=new Array;for(let a=e;;a++){if(null==t[a]||t[a].equals(w.OPERATOR,")")||t[a].contentEquals(n))return r.isNotDone()&&s(t[a-1].position,null==t[a]?new d:new S),r.complete(s),{data:r,jump:a-e};if(!t[a].equals(w.NEWLINE))switch(!0){case t[a].equals(w.WORD):switch(t[a].toString()){case"true":case"false":case"null":r.append(t[a],s);continue}i[0]=G(a,t,s),null!=t[a+i[0].jump]&&t[a+i[0].jump].equals(w.OPERATOR,"(")?(i[1]=D(i[0].data,a+i[0].jump+1,t,s,t[a].position),a+=i[0].jump+i[1].jump+1,r.append(i[1].data,s)):null!=t[a+i[0].jump+1]&&t[a+i[0].jump].equals(w.OPERATOR,"-")&&t[a+i[0].jump+1].equals(w.OPERATOR,">")?(i[1]=M(i[0].data,a+i[0].jump+2,t,s,0),a+=i[0].jump+i[1].jump+1,t[a+1].equals(w.OPERATOR,["*"])&&(a+=1),r.append(i[1].data,s)):(r.append(new x(t[a].position,i[0].data),s),a+=i[0].jump-1);continue;case null!=t[a+1]&&t[a].equals(w.OPERATOR,"-")&&t[a+1].equals(w.OPERATOR,">"):i[0]=M(m.CONSTRUCTORS.OBJECT,a+2,t,s,0),a+=i[0].jump+2,r.append(i[0].data,s);continue;case t[a].equals(w.OPERATOR,"("):i[0]=$(a+1,t,s),a+=i[0].jump+1,r.append(i[0].data,s);continue;case t[a].equals(w.OPERATOR,"?"):return r.complete(s),i[0]=B(new b(t[a].position,r.data),a+1,t,s),{data:i[0].data,jump:a-e+i[0].jump+2};case t[a].equals(w.STRING)||t[a].equals(w.NUMBER)||t[a].equals(w.OPERATOR,["/","*","+","-","!=",">","<",">=","<=","=","|","&"]):r.append(t[a],s);continue;default:return r.isNotDone()&&s(t[a-1].position,new S),r.complete(s),{data:r}}}}function W(e,t,s,n=",",r=1/0,i="unknown"){let a=0,o=[new Array];for(let l=e;;l++)if(!t[l].equals(w.NEWLINE))switch(!0){case void 0===t[l]||t[l].equals(w.OPERATOR,")")&&a<=0:return o.length>0&&o[o.length-1].length>0?o[o.length-1]=$(0,o[o.length-1],s).data:o.length>1?s(t[l-1].position,new p(i)):o.splice(o.length-1,1),{data:o,jump:l-e};case t[l].equals(w.OPERATOR,"("):a++,o[o.length-1].push(t[l]);continue;case t[l].equals(w.OPERATOR,")"):a>0?(a--,o[o.length-1].push(t[l])):s(t[l].position,new c);continue;case t[l].contentEquals(n)&&0===a:o[o.length-1].length>0?(o[o.length-1]=$(0,o[o.length-1],s).data,o.push(new Array),o.length>r&&s(t[l].position,new h(i))):s(t[l].position,new p(i));break;default:o[o.length-1].push(t[l])}}function H(e,t,s){let n=0,r=new Array;for(let i=e;;i++)switch(!0){case void 0===t[i]||t[i].equals(w.OPERATOR,"}")&&n<=0:return{data:Y(0,r,s).data,jump:i-e};case t[i].equals(w.OPERATOR,"{"):n++,r.push(t[i]);continue;case t[i].equals(w.OPERATOR,"}"):n>0?(n--,r.push(t[i])):s(t[i].position,new c);continue;default:r.push(t[i])}}function V(e,t,s){let n=e,r=new Array;if(A(t,n+1,w.NEWLINE)&&t[n+1].equals(w.OPERATOR,"("))if(r[0]=W(n+2,t,s,"",1,"if"),n+=r[0].jump+3,A(t,n,w.NEWLINE)&&t[n].equals(w.OPERATOR,"{")){if(r[1]=H(n+1,t,s),n+=r[1].jump+1,null==t[n+1]||!t[n+1].equals(w.WORD,"else"))return{data:new P(r[0].data[0],r[1].data),jump:n-e};if(A(t,n+2,w.NEWLINE)&&t[n+2].equals(w.OPERATOR,"{"))return r[2]=H(n+3,t,s),n+=r[2].jump+3,{data:new P(r[0].data[0],r[1].data,r[2].data),jump:n-e};if(A(t,n+2,w.NEWLINE)&&t[n+2].equals(w.WORD,"if"))return r[2]=V(n+2,t,s),n+=r[2].jump+2,{data:new P(r[0].data[0],r[1].data,r[2].data),jump:n-e};s(t[n+2].position,new T("else",t[n+2].toString(),"{"))}else s(t[n].position,new T("if",t[n].toString(),"{"));else s(t[n+1].position,new T("if",t[n+1].toString(),"("))}function Y(e,t,s){const r=new F,i=new Array;for(let o=e,l=t.length;;o++)try{if(null==t[o])return{data:r,jump:o-e};switch(!0){case t[o].equals(w.NEWLINE):continue;case t[o].equals(w.OPERATOR,">"):i[0]=$(o+1,t,s),o+=i[0].jump+1,r.push(new v(i[0].data));continue;case t[o].equals(w.WORD,"if"):i[0]=V(o,t,s),o+=i[0].jump,r.push(i[0].data);continue;case t[o].equals(w.WORD,"while"):o+1<l&&A(t,o+1,w.NEWLINE)&&t[o+1].equals(w.OPERATOR,"(")?(i[0]=W(o+2,t,s,"",1,"while"),o+=i[0].jump+3,A(t,o,w.NEWLINE)&&t[o].equals(w.OPERATOR,"{")?(i[1]=H(o+1,t,s),o+=i[1].jump+1,r.push(new L(i[0].data[0],i[1].data))):s(t[o].position,new T("while",t[o].toString(),"{"))):s(t[o+1].position,new T("while",t[o+1].toString(),"("));continue;case t[o].equals(w.WORD,"repeat"):o+1<l&&A(t,o+1,w.NEWLINE)&&t[o+1].equals(w.OPERATOR,"(")?(i[0]=W(o+2,t,s,";",2,"repeat"),o+=i[0].jump+3,A(t,o,w.NEWLINE)&&t[o].equals(w.OPERATOR,"{")?(i[1]=H(o+1,t,s),o+=i[1].jump+1,r.push(new j(i[0].data[0],i[0].data[1],i[1].data))):s(t[o].position,new T("repeat",t[o].toString(),"{"))):s(t[o+1].position,new T("repeat",t[o+1].toString(),"("));continue;case t[o].equals(w.WORD,"set"):if(o+1<l&&A(t,o+1,w.NEWLINE)&&t[o+1].equals(w.WORD)){if(o+2<l&&A(t,o+2,w.NEWLINE)&&t[o+2].equals(w.OPERATOR,"=")){i[0]=$(o+3,t,s),r.push(new I(t[o+1],i[0].data)),o+=i[0].jump+3;continue}s(t[o+3].position,new f(t[o+2].toString(),t[o+2].type))}else s(t[o+2].position,new f(t[o+1].toString(),t[o+1].type));break;case t[o].equals(w.WORD):i[0]=G(o,t,s),o+i[0].jump<l?t[o+i[0].jump].equals(w.OPERATOR,"=")?(i[1]=$(i[0].jump+o+1,t,s),r.push(new _(t[o+i[0].jump].position,i[0].data,i[1].data)),o+=i[0].jump+i[1].jump+1):t[o+i[0].jump].equals(w.OPERATOR,"<")?t[o+i[0].jump+1].equals(w.OPERATOR,"-")?(i[1]=$(i[0].jump+o+2,t,s),r.push(new U(t[o+i[0].jump].position,i[0].data,i[1].data)),o+=i[0].jump+i[1].jump+2):s(t[o+i[0].jump+1].position,new a(t[o+i[0].jump+1].toString(),"-")):t[o+i[0].jump].equals(w.OPERATOR,"(")?(i[1]=$(o,t,s),r.push(i[1].data),o+=i[1].jump):s(t[o].position,new u):o+=i[0].jump;continue;case t[o].equals(w.NUMBER)||t[o].equals(w.STRING):i[0]=$(o,t,s),r.push(i[0].data),o+=i[0].jump;continue;default:s(t[o].position,new a(t[o].toString(),"*"))}}catch(e){if(e instanceof n)throw e;0!=t.length?null!=t[o]?s(t[o].position,new O):s(t[t.length-1].position,new d):s(0,new N)}}e.exports.parser=async function(e,t,s){return new k(Y(0,await q(e,s,t),t).data.Sequence)},e.exports.parserMP=async function(e,t,s,n){let r=0,i=new Array,o=new k;for(let a=0;null!=e[a];a++)if((null==t&&e[a].equals(w.OPERATOR,"{")||null!=t&&e[a].contentEquals(t.toString())&&(e[a+1].equals(w.OPERATOR,"{")||e[a+1].equals(w.SPACE)&&e[a+2].equals(w.OPERATOR,"{")))&&0===r)null!=t&&(a+=e[a+1].equals(w.SPACE)?2:1),i.length>0&&(o.push(new v(new R(m.CONSTRUCTORS.STRING,i.join(""),e[a].position))),i.splice(0,i.length)),r++;else if(e[a].equals(w.OPERATOR,"}")&&1===r)o.push(Y(0,await q(i.filter((e=>e.type!==w.SPACE)),n,s),s).data),i.splice(0,i.length),r--;else{if(r>=1)switch(!0){case e[a].equals(w.OPERATOR,"{"):r++;break;case e[a].equals(w.OPERATOR,"}"):r--}0===!r?i.push(e[a].toString()):i.push(e[a])}return 0!==i.length&&(1===r?(o.push(Y(0,await q(i.filter((e=>e.type!==w.SPACE)),n,s),s).data),i.splice(0,i.length)):0===r?0!=i.length&&(o.push(new v(new R(m.CONSTRUCTORS.STRING,i.join(""),e[e.length-1].position))),i.splice(0,i.length)):s(e[e.length-1].position,new a(e[e.length-1],"}"))),o},e.exports.parseExpression=$},216:(e,t,s)=>{"use strict";e=s.nmd(e);const{EventEmitter:n}=s(138),{IOError:r,PoonyaException:i}=s(943),{Import:a,ImportDir:o,ImportFile:l}=s(742),{Context:c,Heap:u}=s(591),{parser:d,parseExpression:p,parserMP:h}=s(743),{SERVICE:T}=s(351),{toFixed:f,toBytes:O,fromBytes:N,setImmediate:S}=s(88),{iPoonyaConstructsData:E,iCodeEmitter:A}=s(161),y=s(94),w=Symbol("RESULT"),m=Symbol("INIT");class g extends n{constructor(){super(),this._data=new Array,this._ended=!1}toReadable(){const e=this;return new ReadableStream({start(t){e.on("data",t.enqueue.bind(t)),e.on("end",t.close.bind(t))}})}pipe(e){if("function"==typeof e.write)return this.on("data",e.write.bind(e)),e;throw new TypeError("Is not a WriteStream")}write(e){this._data.push(e),this.emit("data",e)}end(){this._ended=!0,this.emit("end")}complete(){return this._ended?this._data:new Promise((e=>this.on("end",(()=>e(this._data)))))}}class R extends A{constructor(e,t=[],s=console,i){super();const a=this,o=new n;if(a.on=o.on,a.once=o.once,a.emit=o.emit,a.input=null,a.loaded=!1,a.logger=s,"string"==typeof e)a.input=e,a.charset="utf-8",a.path=window.location.href,T.LOADED?(a[m](t,s),S((()=>i.call(a)))):T.ACTIONS.on("load",(()=>{a[m](t,s),i.call(a)}));else{if("object"!=typeof e)throw new Error("BAD_DATA_FORMAT");if(a.charset="string"==typeof e.charset?e.charset:"utf-8",a.path="string"==typeof e.path?e.path.split("/").pop().split(".").length>0?e.path:e.path+".po":"anonymous.po","string"==typeof e.raw)a.input=e.raw;else{if("string"!=typeof e.path)throw new Error("BAD_DATA_FORMAT");try{fetch(e.path,{method:"GET"}).catch((e=>{throw e})).then((e=>e.text())).then((e=>{a.input=e,T.LOADED?(a[m](t,s),i.call(a)):T.ACTIONS.on("load",(()=>{a[m](t,s),i.call(a)}))}))}catch(t){throw new r(e.path)}}}}throwError(e,t,s=5){s=parseInt(s);let n=[],r=this.input.split(/$\n/gm),a=N(O(this.input).slice(0,e)).split(/$\n/gm),o=a.length-1,l=o-parseInt(s/2)<0?0:o-parseInt(s/2),c=l+s<r.length?l+s:r.length,u=c.toString(16).length+2;if(n.push("  at ",this.path,":",o+1,":",a[o].length),-1!=e){n.push(" :>\n");for(let e=l;e<c;e++)n.push("     ",f(e+1,u)," |> ",r[e]),e===o&&n.push("\n     ".padEnd(u+6," ")," |> ".padEnd(a[o].length+3," "),"^"),e+1!==c&&n.push("\n")}throw t instanceof i?(T.CONFIG.DEBUG&&console.trace(t),t.message+="\n"+n.join(""),t):new i(t,n.join(""))}[m](e,t){this.libraries=a(["default",...e],t),this.import=e,this.data=null}[w](e,t,s,n){if(Array.isArray(e))this.data.result(new c(this.libraries,t,...e),s,t,(()=>s.end()));else if(e instanceof c)if(n){const n=e.clone();n.import(this.libraries,t),this.data.result(n,s,t,(()=>s.end()))}else this.data.result(e,s,t,(()=>s.end()));else this.data.result(new c(this.libraries,t,e),s,t,(()=>s.end()))}result(e=new u,t=this.throwError.bind(this),s=!1){const n=new g;return this.loaded?S((()=>this[w](e,t,n,s))):this.on("load",(()=>this[w](e,t,n,s))),n}}class C extends R{constructor(e,t="poonya",s,n=console){super(e,s,n,(async()=>{try{this.data=await h(y(O(this.input)),t,this.throwError.bind(this),this.path)}catch(e){this.emit("error",e)}this.loaded=!0,this.emit("load")}))}}class b extends R{constructor(e,t,s=console){super(e,t,s,(async()=>{try{this.data=await d(y(O(this.input),!1),this.throwError.bind(this),this.path)}catch(e){this.emit("error",e)}this.loaded=!0,this.emit("load")}))}}(async()=>{s(990),s(722),T.ACTIONS.emit("load")})(),(()=>{const e=new Event("poonya:load");document.addEventListener("DOMContentLoaded",(async()=>{const t=document.querySelectorAll('script[type="text/poonya"], script[lang="text/poonya"]');for(let e,s,n,r,i,a,o=0,l=t.length;o<l;o++){if(e=t[o].getAttribute("name")??"block-"+o,s=t[o].getAttribute("handler")??"exec",n=(t[o].getAttribute("import")??"").split("|"),r=new Event("poonya:load:"+e),i=new Event("poonya:error:"+e),"exec"==s)a=new b(t[o].innerHTML,n);else{if("message"!=s)throw new Error('Unknown pattern handler in block "'+e+'" type "'+s+'"');a=new C(t[o].innerHTML,n)}await new Promise(((e,s)=>{a.on("load",(async()=>{t[o].replaceWith(...(await a.result().complete()).map((e=>{return t=e,(s=document.createElement("template")).innerHTML=t,s.content.cloneNode(!0);var t,s}))),window.dispatchEvent(r),e()})),a.on("error",(t=>{window.dispatchEvent(i),e()}))}))}window.dispatchEvent(e)}))})(),e.exports.CodeEmitter=R,e.exports.MessagePattern=C,e.exports.PoonyaOutputStream=g,e.exports.ExpressionPattern=class extends R{constructor(e,t,s=console){super(e,t,s,(()=>{try{this.data=p(0,y(O(this.input),!1),this.throwError.bind(this)).data}catch(e){this.emit("error",e)}this.loaded=!0,this.emit("load")}))}[w](e,t,s){return new Promise((n=>{if(e instanceof c)if(s){const s=e.clone();s.import(this.libraries,t),this.data.result(s,[],t,(e=>e.result(s,null,null,n)))}else this.data.result(e,[],t,(t=>t.result(e,null,null,n)));else if(Array.isArray(e)){const s=new c(this.libraries,t,...e);this.data.result(s,[],t,(e=>e.result(s,null,null,n)))}else{const s=new c(this.libraries,t,...e);this.data.result(s,[],t,(e=>e.result(s,null,null,n)))}}))}result(e=new u,t=this.throwError.bind(this),s=!1){const n=this;return new Promise((r=>{n.loaded?n[w](e,t,s).then(r):n.on("load",(()=>n[w](e,t,s).then(r)))}))}},e.exports.ExecutionPattern=b,e.exports.createPattern=function(e,...t){if(Object.prototype.isPrototypeOf.call(R,e))return e=new e(...t),new Promise(((t,s)=>{e.on("load",((...s)=>t(Object.assign(new E,{data:e,args:s})))),e.on("error",((...t)=>s(Object.assign(new E,{data:e,args:t}))))}));throw new Error('The "Pattern" must be a "CodeEmitter" heir')},e.exports.createContext=function(e=new Object,...t){if("object"!=typeof e||null==e)throw new Error('Param "data" must be an object.');return t=t.flat(1/0).filter((e=>"string"!=typeof e)),new Promise((s=>{T.LOADED?s(new c(a(["default",...t]),R.prototype.throwError.bind({input:"",charset:"utf-8",path:"untitled.po",logger:console}),e)):T.ACTIONS.on("load",(()=>{s(new c(a(["default",...t]),R.prototype.throwError.bind({input:"",charset:"utf-8",path:"untitled.po",logger:console}),e))}))}))},e.exports.ImportFile=l.bind(null,null!=e.parent?e.parent.path:e.path)},40:(e,t,s)=>{"use strict";e.exports.FIELDFLAGS=s(351).FIELDFLAGS,e.exports.Exceptions=s(943),e.exports.PoonyaStaticLibrary=s(742).PoonyaStaticLibrary,e.exports.PoonyaPrototype=s(326)},88:(e,t,s)=>{"use strict";const{SERVICE:n}=s(351),{Operand:r}=s(501),{iPoonyaObject:i,iPoonyaPrototype:a,iCodeEmitter:o}=s(161),l=s(329),c=function(){let e=new Object,t=e;const s=Math.random();function n(t){if(t.data!=s)return;e=e.next;const n=e.func,r=e.args;delete e.func,delete e.args,n(...r)}return window.addEventListener?window.addEventListener("message",n):window.attachEvent("onmessage",n),function(e,...n){t=t.next={func:e,args:n},window.postMessage(s,"*")}}(),u=c;e.exports.setImmediate=c,e.exports.maybeEquals=function(e,t,s,n){for(;e[t].equals(s,n);)e.splice(t,1);return!0},e.exports.countKeys=function(e,t,s,n){for(let r=t,i=e.length;r<i;r++)if(null==e[r]||!e[r].equals(s,n))return r-t},e.exports.fromBytes=function(e){let t="";for(let s=0,n=e.length;s<n;s+=2)t+=String.fromCharCode(e[s]<<8|e[s+1]);return t},e.exports.toFixed=function(e,t){return"0x"+e.toString(16).padStart(t-2,"0")},e.exports.toBytes=function(e){let t=new Array;for(let s,n=0,r=e.length;n<r;n++)t.push((s=e.charCodeAt(n))>>>8,255&s);return t},e.exports.Tick=u,e.exports.Cast=function(e,t,s=new Array){let c;switch(typeof e){case"bigint":t.createObject(e,-1,n.CONSTRUCTORS.INTEGER,null,s,(e=>c=e));break;case"number":t.createObject(e,-1,n.CONSTRUCTORS.NUMBER,null,s,(e=>c=e));break;case"string":t.createObject(e,-1,n.CONSTRUCTORS.STRING,null,s,(e=>c=e));break;case"symbol":t.createObject(Symbol.keyFor(e),-1,n.CONSTRUCTORS.STRING,null,s,(e=>c=e));break;case"boolean":t.createObject(e,-1,n.CONSTRUCTORS.BOOLEAN,null,s,(e=>c=e));break;case"undefined":t.createObject(e,-1,n.CONSTRUCTORS.NULL,null,s,(e=>c=e));break;case"object":switch(!0){case null===e:t.createObject(e,-1,n.CONSTRUCTORS.NULL,null,s,(e=>c=e));break;case e instanceof i:case e instanceof a:case e instanceof l:case e instanceof r:c=e;break;case e instanceof o:t.createObject(e,-1,n.CONSTRUCTORS.PATTERN,null,s,(e=>c=e));break;default:s.push(e),Array.isArray(e)?t.createObject(e,-1,n.CONSTRUCTORS.ARRAY,null,s,(e=>c=e)):t.createObject(e,-1,n.CONSTRUCTORS.OBJECT,null,s,(e=>c=e))}break;case"function":c=new l(e)}return c}},386:()=>{}},t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n](r,r.exports,s),r.loaded=!0,r.exports}return s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s(216)})())}}}));
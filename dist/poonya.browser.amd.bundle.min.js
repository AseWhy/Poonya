/*! For license information please see poonya.browser.amd.bundle.min.js.LICENSE.txt */
define("poonya",[],(()=>(()=>{var t={722:(t,e,s)=>{const{PoonyaStaticLibrary:n,FIELDFLAGS:r}=s(40),i=/"/g,o=/<([aA-zZ0-9]+)/;function a(t){return null===t?"null":void 0===t?"undefined":t.toString()}new class extends n{constructor(){super("default.html.tags",!1,!1,"TAGS"),this.addField("A","a",r.CONSTANT),this.addField("ABBR","abbr",r.CONSTANT),this.addField("ADDRESS","address",r.CONSTANT),this.addField("AREA","area",r.CONSTANT),this.addField("ARTICLE","article",r.CONSTANT),this.addField("ASIDE","aside",r.CONSTANT),this.addField("AUDIO","audio",r.CONSTANT),this.addField("B","b",r.CONSTANT),this.addField("BASE","base",r.CONSTANT),this.addField("BDI","bdi",r.CONSTANT),this.addField("BDO","bdo",r.CONSTANT),this.addField("BLOCKQUOTE","blockquote",r.CONSTANT),this.addField("BODY","body",r.CONSTANT),this.addField("BR","br",r.CONSTANT),this.addField("BUTTON","button",r.CONSTANT),this.addField("CANVAS","canvas",r.CONSTANT),this.addField("CAPTION","caption",r.CONSTANT),this.addField("CITE","cite",r.CONSTANT),this.addField("CODE","code",r.CONSTANT),this.addField("COL","col",r.CONSTANT),this.addField("COLGROUP","colgroup",r.CONSTANT),this.addField("DATA","data",r.CONSTANT),this.addField("DATALIST","datalist",r.CONSTANT),this.addField("DD","dd",r.CONSTANT),this.addField("DEL","del",r.CONSTANT),this.addField("DETAILS","details",r.CONSTANT),this.addField("DFN","dfn",r.CONSTANT),this.addField("DIALOG","dialog",r.CONSTANT),this.addField("DIV","div",r.CONSTANT),this.addField("DL","dl",r.CONSTANT),this.addField("DT","dt",r.CONSTANT),this.addField("EM","em",r.CONSTANT),this.addField("EMBED","embed",r.CONSTANT),this.addField("FIELDSET","fieldset",r.CONSTANT),this.addField("FIGCAPTION","figcaption",r.CONSTANT),this.addField("FIGURE","figure",r.CONSTANT),this.addField("FOOTER","footer",r.CONSTANT),this.addField("FORM","form",r.CONSTANT),this.addField("H1","h1",r.CONSTANT),this.addField("H2","h2",r.CONSTANT),this.addField("H3","h3",r.CONSTANT),this.addField("H4","h4",r.CONSTANT),this.addField("H5","h5",r.CONSTANT),this.addField("H6","h6",r.CONSTANT),this.addField("HEAD","head",r.CONSTANT),this.addField("HEADER","header",r.CONSTANT),this.addField("HR","hr",r.CONSTANT),this.addField("HTML","html",r.CONSTANT),this.addField("I","i",r.CONSTANT),this.addField("IFRAME","iframe",r.CONSTANT),this.addField("IMG","img",r.CONSTANT),this.addField("INPUT","input",r.CONSTANT),this.addField("INS","ins",r.CONSTANT),this.addField("KBD","kbd",r.CONSTANT),this.addField("LABEL","label",r.CONSTANT),this.addField("LEGEND","legend",r.CONSTANT),this.addField("LI","li",r.CONSTANT),this.addField("LINK","link",r.CONSTANT),this.addField("MAIN","main",r.CONSTANT),this.addField("MAP","map",r.CONSTANT),this.addField("MARK","mark",r.CONSTANT),this.addField("META","meta",r.CONSTANT),this.addField("METER","meter",r.CONSTANT),this.addField("NAV","nav",r.CONSTANT),this.addField("NOSCRIPT","noscript",r.CONSTANT),this.addField("OBJECT","object",r.CONSTANT),this.addField("OL","ol",r.CONSTANT),this.addField("OPTGROUP","optgroup",r.CONSTANT),this.addField("OPTION","option",r.CONSTANT),this.addField("OUTPUT","output",r.CONSTANT),this.addField("P","p",r.CONSTANT),this.addField("PARAM","param",r.CONSTANT),this.addField("PICTURE","picture",r.CONSTANT),this.addField("PRE","pre",r.CONSTANT),this.addField("PROGRESS","progress",r.CONSTANT),this.addField("Q","q",r.CONSTANT),this.addField("RUBY","ruby",r.CONSTANT),this.addField("RB","rb",r.CONSTANT),this.addField("RT","rt",r.CONSTANT),this.addField("RTC","rtc",r.CONSTANT),this.addField("RP","rp",r.CONSTANT),this.addField("S","s",r.CONSTANT),this.addField("SAMP","samp",r.CONSTANT),this.addField("SCRIPT","script",r.CONSTANT),this.addField("SECTION","section",r.CONSTANT),this.addField("SELECT","select",r.CONSTANT),this.addField("SMALL","small",r.CONSTANT),this.addField("SOURCE","source",r.CONSTANT),this.addField("SPAN","span",r.CONSTANT),this.addField("STRONG","strong",r.CONSTANT),this.addField("STYLE","style",r.CONSTANT),this.addField("SUB","sub",r.CONSTANT),this.addField("SUMMARY","summary",r.CONSTANT),this.addField("SUP","sup",r.CONSTANT),this.addField("TABLE","table",r.CONSTANT),this.addField("TBODY","tbody",r.CONSTANT),this.addField("TD","td",r.CONSTANT),this.addField("TEMPLATE","template",r.CONSTANT),this.addField("TEXTAREA","textarea",r.CONSTANT),this.addField("TFOOT","tfoot",r.CONSTANT),this.addField("TH","th",r.CONSTANT),this.addField("THEAD","thead",r.CONSTANT),this.addField("TIME","time",r.CONSTANT),this.addField("TITLE","title",r.CONSTANT),this.addField("TR","tr",r.CONSTANT),this.addField("TRACK","track",r.CONSTANT),this.addField("U","u",r.CONSTANT),this.addField("UL","ul",r.CONSTANT),this.addField("VAR","var",r.CONSTANT),this.addField("VIDEO","video",r.CONSTANT),this.addField("WBR","wbr",r.CONSTANT)}},new class extends n{constructor(){super("default.html",!1,!1,"html"),this.addLib("default.html.tags",r.CONSTANT),this.addField("createElement",this.createElement,r.CONSTANT),this.addField("getElementName",this.getElementName,r.CONSTANT),this.addField("isElement",this.isElement,r.CONSTANT),this.addField("createTag",this.createTag,r.CONSTANT),this.addField("closeTag",this.closeTag,r.CONSTANT)}createElement(t,e,s,n=new Array){"string"!=typeof e&&(e=null!=e?e.toString():""),"string"!=typeof s&&(s=null!=s?s.toString():"");let r=new Array;for(let t in n)r.push(`${t}="${a(n[t]).replace(i,'\\"')}"`);return`<${e}${r.length>0?" "+r.join(" "):""}>${s}</${e}>`}getElementName(t,e){return"string"==typeof e?e.match(o)[1]:null}isElement(t,e,s){return"string"==typeof e&&e.match(o)[1]==s}createTag(t,e,s=new Array){if("string"==typeof e){let t=new Array;for(let e in s)t.push(`${e}="${a(s[e]).replace(i,'\\"')}"`);return`<${e}${t.length>0?" "+t.join(" "):""}>`}return null}closeTag(t,e){return"string"==typeof e?`</${e}>`:null}}},990:(t,e,s)=>{const{PoonyaStaticLibrary:n,PoonyaPrototype:r,FIELDFLAGS:o,Exceptions:a}=s(40);new class extends n{constructor(){super("default.joiners",!1,!1,"Join"),this.addField("concat",this.concat,o.CONSTANT),this.addField("raw",this.raw,o.CONSTANT)}concat(t,...e){return Array.prototype.join.call(e,"")}raw(t,...e){return e}},new class extends n{constructor(){super("default.math",!1,!1,"Math"),this.addField("floor",this.floor,o.CONSTANT),this.addField("round",this.round,o.CONSTANT),this.addField("ceil",this.ceil,o.CONSTANT),this.addField("abs",this.abs,o.CONSTANT)}ceil(t,e){return"number"!=typeof e||isNaN(e)?null:Math.ceil(e)}floor(t,e){return"number"!=typeof e||isNaN(e)?null:Math.floor(e)}round(t,e){return"number"!=typeof e||isNaN(e)?null:Math.round(e)}abs(t,e){return"number"!=typeof e||isNaN(e)?null:Math.abs(e)}},new class extends n{constructor(){super("default.dates",!1,!1,"Date"),this.addField("minutes",this.minutes,o.CONSTANT),this.addField("seconds",this.seconds,o.CONSTANT),this.addField("month",this.month,o.CONSTANT),this.addField("hours",this.hours,o.CONSTANT),this.addField("year",this.year,o.CONSTANT),this.addField("day",this.day,o.CONSTANT),this.addField("now",this.now,o.CONSTANT),this.date=new Date}year(){return this.date.getUTCFullYear()}month(){return this.date.getUTCMonth()}day(){return this.date.getUTCDay()}hours(){return this.date.getUTCHours()}minutes(){return this.date.getUTCMinutes()}seconds(){return this.date.getUTCSeconds()}now(){return this.date.getTime()}};class l extends r{constructor(){super([],"Object"),this.addField("create",this.create,o.CONSTANT|o.STATIC),this.addField("values",this.values,o.CONSTANT),this.addField("assign",this.assign,o.CONSTANT),this.addField("remove",this.remove,o.CONSTANT),this.addField("keys",this.keys,o.CONSTANT),this.addField("set",this.set,o.CONSTANT),this.addField("has",this.has,o.CONSTANT),this.addField("get",this.get,o.CONSTANT)}keys(){return this.keys()}values(){return this.values()}assign(t,...e){for(let t=0,s=e.length;t<s;t++)this.append(e[t]);return null}set(t,e,s){return this.set(t.context,e,s),null}has(t,e){return this.has(e)}get(t,e){return this.get(e)}remove(t,e){return this.delete(e),null}create(){return new Object}}class c extends r{constructor(){super([],"Number"),this.addField("random",this.random,o.CONSTANT|o.STATIC),this.addField("isNumber",this.isNumber,o.CONSTANT|o.STATIC),this.addField("parseInt",this.parseInt,o.CONSTANT|o.STATIC)}random(t,e,s){return"number"!=typeof e||"number"!=typeof s||isNaN(e)||isNaN(s)?Math.random():Math.round(e+Math.random()*(s-e))}isNumber(t,e){return"number"==typeof e&&!isNaN(e)}parseInt(t,e){return isNaN(e=parseInt(e))?null:e}}class u extends r{constructor(t,e){let s=null;t.getByPath(["Number"],-1,null,e,null,(t=>s=t)),super([s],"Integer"),this.addField("parseInt",this.parseInt,o.CONSTANT|o.STATIC),this.addField("isInteger",this.isInteger,o.CONSTANT|o.STATIC)}isInteger(t,e){return"bigint"==typeof e}parseInt(t,e){return BigInt(e)}}class d extends r{constructor(){super([],"Boolean")}}class p extends r{constructor(){super([],"Null")}}class h extends r{constructor(){super([],"Pattern")}}class f extends r{constructor(t){super([],"String"),this.addField("charAt",this.charAt,o.CONSTANT,t),this.addField("length",this.length,o.CONSTANT|o.PROPERTY,t),this.addField("fromaCharCode",this.fromaCharCode,o.CONSTANT|o.STATIC,t)}fromaCharCode(t,e){return String.fromCharCode(e)}charAt(t,e){return null!=e?this.data.charAt(e):null}length(){return this.data.length}}class T extends r{constructor(t){super([],"Array"),this.addField("from",this.from,o.CONSTANT|o.STATIC,t),this.addField("includes",this.includes,o.CONSTANT,t),this.addField("indexOf",this.indexOf,o.CONSTANT,t),this.addField("concat",this.concat,o.CONSTANT,t),this.addField("append",this.append,o.CONSTANT,t),this.addField("length",this.length,o.CONSTANT|o.PROPERTY,t),this.addField("remove",this.remove,o.CONSTANT,t),this.addField("slice",this.slice,o.CONSTANT,t),this.addField("pop",this.pop,o.CONSTANT,t)}from(t,...e){return e}includes(t,e){for(let s of this.fields)if(s.value.result(t.context,null,t.reject)==e)return!0;return!1}remove(t,e,s){("number"!=typeof e||isNaN(e))&&t.reject(t.position,new a.PoonyaException("From must have a number type")),("number"!=typeof s||isNaN(s))&&t.reject(t.position,new a.PoonyaException("To must have a number type"));const n=s-e;for(;e!=s;)this.remove(e),e+=n;return null}indexOf(t,e){for(let[s,n]of this.fields)if(n.result(t.context,null,t.reject)==e)return s;return-1}length(){return this.fields.size}append(t,e){return this.push(e),null}concat(t,...e){for(let t=0,s=e.length;t<s;t++)for(let s=0,n=e[t].length;s<n;s++)this.push(e[t][s]);return null}slice(t,e,s){("number"!=typeof e||isNaN(e))&&t.reject(t.position,new a.PoonyaException("From must have a number type")),("number"!=typeof s||isNaN(s))&&t.reject(t.position,new a.PoonyaException("To must have a number type"));const n=s-e,r=new Array;for(;e!=s;)r.push(this.get(e)),e+=n;return r}pop(){const t=this.fields.get(this.fields.size-1);return this.fields.remove(this.fields.size-1),t}}new class extends n{constructor(){super("default",!0),this.expandPrototype(l),this.expandPrototype(T),this.expandPrototype(f),this.expandPrototype(d),this.expandPrototype(c),this.expandPrototype(u),this.expandPrototype(p),this.expandPrototype(h),this.addField("endd","\n\n",o.CONSTANT),this.addField("endl","\n",o.CONSTANT),this.addField("tab","\t",o.CONSTANT),this.addField("log",this.log,o.CONSTANT),this.addField("wait",this.wait,o.CONSTANT),this.addField("require",this.require,o.CONSTANT),this.addField("eval",this.eval,o.CONSTANT),this.addLib("default.joiners"),this.addLib("default.dates"),this.addLib("default.math")}require(t,e){(async()=>{let s,n;s=window.location.origin+"/"+t.context.source.split("/").slice(0,-1).join("/")+"/"+e,s=s.split("/").pop().split(".").length>0?s:s+".po",n=fetch(s,{method:"GET"}).then((t=>t.text())),s==t.context.source&&t.reject(data[i].position,new a.IsRecursiveLink(t.context.source));try{t.resolve(await t.context.clone().setSource(s).eval(await n))}catch(e){t.reject(data[i].position,new a.LinkerIOError(s))}})()}eval(t,e){return service.context.eval(e)}wait(t,e){setTimeout(t.resolve,e)}log(t,...e){return console.log(...e),null}}},138:t=>{"use strict";var e,s="object"==typeof Reflect?Reflect:null,n=s&&"function"==typeof s.apply?s.apply:function(t,e,s){return Function.prototype.apply.call(t,e,s)};e=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise((function(s,n){function r(){void 0!==i&&t.removeListener("error",i),s([].slice.call(arguments))}var i;"error"!==e&&(i=function(s){t.removeListener(e,r),n(s)},t.once("error",i)),t.once(e,r)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function c(t,e,s,n){var r,i,o,c;if(a(s),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,s.listener?s.listener:s),i=t._events),o=i[e]),void 0===o)o=i[e]=s,++t._eventsCount;else if("function"==typeof o?o=i[e]=n?[s,o]:[o,s]:n?o.unshift(s):o.push(s),(r=l(t))>0&&o.length>r&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,c=u,console&&console.warn&&console.warn(c)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,s){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:s},r=u.bind(n);return r.listener=s,n.wrapFn=r,r}function p(t,e,s){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"==typeof r?s?[r.listener||r]:[r]:s?function(t){for(var e=new Array(t.length),s=0;s<e.length;++s)e[s]=t[s].listener||t[s];return e}(r):f(r,r.length)}function h(t){var e=this._events;if(void 0!==e){var s=e[t];if("function"==typeof s)return 1;if(void 0!==s)return s.length}return 0}function f(t,e){for(var s=new Array(e),n=0;n<e;++n)s[n]=t[n];return s}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(t){for(var e=[],s=1;s<arguments.length;s++)e.push(arguments[s]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=i[t];if(void 0===l)return!1;if("function"==typeof l)n(l,this,e);else{var c=l.length,u=f(l,c);for(s=0;s<c;++s)n(u[s],this,e)}return!0},i.prototype.addListener=function(t,e){return c(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return c(this,t,e,!0)},i.prototype.once=function(t,e){return a(e),this.on(t,d(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,d(this,t,e)),this},i.prototype.removeListener=function(t,e){var s,n,r,i,o;if(a(e),void 0===(n=this._events))return this;if(void 0===(s=n[t]))return this;if(s===e||s.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,s.listener||e));else if("function"!=typeof s){for(r=-1,i=s.length-1;i>=0;i--)if(s[i]===e||s[i].listener===e){o=s[i].listener,r=i;break}if(r<0)return this;0===r?s.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(s,r),1===s.length&&(n[t]=s[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,s,n;if(void 0===(s=this._events))return this;if(void 0===s.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==s[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete s[t]),this;if(0===arguments.length){var r,i=Object.keys(s);for(n=0;n<i.length;++n)"removeListener"!==(r=i[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=s[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},i.prototype.listeners=function(t){return p(this,t,!0)},i.prototype.rawListeners=function(t){return p(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):h.call(t,e)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},501:(t,e,s)=>{"use strict";const{OPERATOR:n}=s(351);class r{constructor(t="undefined"){this.type=t}}t.exports.Operand=class extends r{constructor(t="undefined"){super("operand"),this.name=t}__sync(t){return this}__executable(){return new Array}},t.exports.Operator=class extends r{constructor(t){switch(super("operator"),this.position=t.position,this.raw=t.data,t.data.toString()){case"+":this.op_p=n.PLUS;break;case"-":this.op_p=n.MINUS;break;case"*":this.op_p=n.MULT;break;case"/":this.op_p=n.DIVIDE;break;case">":this.op_p=n.LARGER;break;case"<":this.op_p=n.LESS;break;case">=":this.op_p=n.ELARGER;break;case"<=":this.op_p=n.ELESS;break;case"=":this.op_p=n.EQUAL;break;case"!=":this.op_p=n.NEQUAL;break;case"&":this.op_p=n.AND;break;case"|":this.op_p=n.OR}}equals(t){return this.op_p===t}toString(){return this.raw.toString()}},t.exports.ParserData=r},580:(t,e,s)=>{"use strict";const{iPoonyaOutputStream:n}=s(161);t.exports=class extends n{constructor(){super(),this._data=new Array,this._ended=!1}toReadable(){const t=this;return new ReadableStream({start(e){t.on("data",e.enqueue.bind(e)),t.on("end",e.close.bind(e))}})}pipe(t){if("function"==typeof t.write)return this.on("data",t.write.bind(t)),t;throw new TypeError("Is not a WriteStream")}write(t){this._data.push(t),this.emit("data",t)}error(t){this._data.push(t),this.emit("error",t)}end(){this._ended=!0,this.emit("end")}complete(){return this._ended?this._data:new Promise(((t,e)=>{this.on("end",(()=>t(this._data))),this.on("error",(t=>e(t)))}))}}},329:(t,e,s)=>{"use strict";const{Operand:n}=s(501),{SERVICE:r}=s(351),{NativeFunctionExecutionError:i}=s(943),{iPoonyaObject:o,iPoonyaPrototype:a,iCodeEmitter:l}=s(161);class c{constructor(t){this.target=t,this.name=t.name}result(t=null,e,s,u,d,p,h){let f=this,T=new Array,O=!0,N=e.length,y=0;function S(t){if(O)switch(O=!1,typeof t){case"bigint":s.createObject(t,-1,r.CONSTRUCTORS.INTEGER,null,new Array,h);break;case"number":s.createObject(t,-1,r.CONSTRUCTORS.NUMBER,null,new Array,h);break;case"string":s.createObject(t,-1,r.CONSTRUCTORS.STRING,null,new Array,h);break;case"symbol":s.createObject(Symbol.keyFor(t),-1,r.CONSTRUCTORS.STRING,null,new Array,h);break;case"boolean":s.createObject(t,-1,r.CONSTRUCTORS.BOOLEAN,null,new Array,h);break;case"undefined":s.createObject(t,-1,r.CONSTRUCTORS.NULL,null,new Array,h);break;case"object":switch(!0){case null===t:s.createObject(t,-1,r.CONSTRUCTORS.NULL,null,new Array,h);break;case t instanceof l:s.createObject(t,-1,r.CONSTRUCTORS.PATTERN,null,new Array,h);break;case t instanceof a||t instanceof o||t instanceof n:h(t);break;default:Array.isArray(t)?s.createObject(t,-1,r.CONSTRUCTORS.ARRAY,null,new Array,h):s.createObject(t,-1,r.CONSTRUCTORS.OBJECT,null,new Array,h)}break;case"function":h(new c(t))}}function A(){let n;try{n=f.target.call(t,{args:e,context:s,reject:p,resolve:S,position:d},...T)}catch(t){p(d,new i(f.target.name,t instanceof Error?t.stack:(new Error).stack))}n instanceof Promise?n.catch((t=>p(d,new i(f.target.name,t instanceof Error?t.stack:(new Error).stack)))).then(S):void 0!==n&&S(n)}0!=N?function t(){e[y]instanceof n?e[y].result(s,u,p,(e=>{e.result(s,u,p,(e=>{T[y]=e,++y>=N?A():t()}))})):(T[y]=e[y],++y>=N?A():t())}():A()}}t.exports=c},36:(t,e,s)=>{"use strict";const{FIELDFLAGS:n}=s(351),r=s(753),i=s(329);class o extends r{constructor(t=null,e,s,n){const r=new Object;if(e)if(Array.isArray(e))for(let t=0,s=e.length;t<s;t++)r[t]=e[key];else for(let t in e)switch(typeof t){case"string":r[parseInt(t)]=e[t];break;case"number":r[t]=e[t]}super(t,r,s,n)}clone(){const t=new o(this.prototype);return t.fields=new Map(this.fields),t.field_attrs=new Map(this.field_attrs),t}push(t,e,s=new Array){this.set(t,this.fields.size,e,s)}result(t,e,s,r){let o,a=new Array(this.fields.size);for(let[r,l]of this.fields)o=this.field_attrs.get(r),null!=o&&0!=(o&n.NOOUTPUT)||(l instanceof i?a[r]=null!=l?l.target:null:null!=l&&l.result(t,e,s,(t=>a[r]=t)));r(a)}toRawData(){return`[Array:${this.prototype.name}]`}}t.exports=o},839:(t,e,s)=>{"use strict";const n=s(753);class r extends n{constructor(t=null,e,s,n){super(t,e,s,n),this.data="boolean"==typeof e?e:"true"==e||"false"!=e}append(t){this.data=t}clone(){return new r(this.prototype,this.data)}set(){}remove(){}result(t,e,s,n){n(this.data)}toRawData(){return this.data}}t.exports=r},550:(t,e,s)=>{"use strict";const n=s(753);class r extends n{constructor(t=null,e,s,n){super(t,e,s,n),this.data=BigInt(e)}clone(){return new r(this.prototype,this.data)}append(t){this.data=t}set(){}remove(){}result(t,e,s,n){n(this.data)}toRawData(){return this.data}}t.exports=r},679:(t,e,s)=>{"use strict";const n=s(753);class r extends n{constructor(t=null,e,s,n){super(t,null,s,n)}clone(){return new r(this.prototype)}append(){}set(){}remove(){}result(t,e,s,n){n(null)}toRawData(){return null}}t.exports=r},220:(t,e,s)=>{"use strict";const n=s(753);class r extends n{constructor(t=null,e,s,n){super(t,e,s,n),this.data=parseFloat(e)}clone(){return new r(this.prototype,this.data)}append(t){this.data=t}set(){}remove(){}result(t,e,s,n){n(this.data)}toRawData(){return this.data}}t.exports=r},753:(t,e,s)=>{"use strict";const{BadKeyInvalidTypeException:n,BadKeyProtectedFieldException:r}=s(943),{SUPER_CALL:i,GET:o,FIELDFLAGS:a,CONFIG:l}=s(351),{Cast:c}=s(88),{iPoonyaObject:u,iPoonyaPrototype:d}=s(161),p=s(329);class h extends u{constructor(t,e,s,n){super(),this.fields=new Map,this.field_attrs=new Map,this.raw=!1,t instanceof d&&(t[i](this,e),this.prototype=t),"object"==typeof e&&null!=e&&this.append(s,e)}clone(){const t=new h(this.prototype);return t.fields=new Map(this.fields),t.field_attrs=new Map(this.field_attrs),t.raw=this.raw,t}has(t){return this.fields.has(t)}remove(t){return this.fields.delete(t)&&this.field_attrs.delete(t)}get(t,e){let s=this.fields.get(t);return null!=s?s:this.prototype[o](t,e,!1)}setConstant(t){let e=0;if(null==(e=this.field_attrs.get(t)))throw new Error("Cannot find filed "+t+" in "+this.prototype.name+".Object");this.field_attrs.set(t,e|a.CONSTANT)}setHide(t){let e=0;if(null==(e=this.field_attrs.get(t)))throw new Error("Cannot find filed "+t+" in "+this.prototype.name+".Object");this.field_attrs.set(t,e|a.NOOUTPUT)}append(t,e){if("object"!=typeof e)throw new TypeError;if(Array.isArray(e))for(let s=0,n=e.length;s<n;s++)this.set(t,s,e[s],e);else if(e instanceof h)for(let s of e.fields)this.set(t,s[0],s[1]);else for(let s in e)this.set(t,s,e[s])}set(t,e,s,i=new Array){if("string"!=typeof e&&"number"!=typeof e)throw new n;const o=this.field_attrs.get(e);if(null!=o&&0==(o&a.CONSTANT))throw new r;try{c(s,t,i,this.fields.set.bind(this.fields,e))}catch(t){throw l.DEBUG&&console.error(t),new Error("Error when cast value of "+e)}}toString(t,e,s){let n=this.fields.get("toString");return null!=n?n.result(t,e,s):`[Object${this.prototype.name}]`}result(t,e,s,n){let r,i=new Object;for(let[n,o]of this.fields)r=this.field_attrs.get(n),null!=r&&0!=(r&a.NOOUTPUT)||(o instanceof p?i[n]=null!=o?o.target:null:null!=o&&o.result(t,e,s,(t=>i[n]=t)));n(i)}toRawData(){return`[Object:${this.prototype.name}]`}}t.exports=h},360:(t,e,s)=>{"use strict";const{Cast:n}=s(88),{iCodeEmitter:r}=s(161),i=s(753);class o extends i{constructor(t=null,e,s,n){super(t,e,s,n),this.data=e}clone(){return new o(this.prototype,this.data)}get(){return null}set(){}remove(){}result(t,e,s,r){const i=this.data.result();i instanceof Promise?i.then((e=>n(e,t,[],r))):i.complete().then((e=>n(e,t,[],r)))}toRawData(){return"[Object:Pattern]"}}t.exports=o},326:(t,e,s)=>{"use strict";const{IS:n,GET:r,FIELDFLAGS:i,SUPER_CALL:o}=s(351),{iPoonyaPrototype:a}=s(161),{Cast:l}=s(88);class c extends a{constructor(t=[],e){if(super(),null!=t.find((t=>!(t instanceof a))))throw new Error("Only descendants of iPoonyaPrototype should be specified as parents of the target class");if("string"!=typeof e&&null!=e)throw new Error("Only string value can be passed as name");this.name=null!=e?e:"Object",this._parents=[...t],this._fields_data=new Map,this._fields=new Map}clone(){const t=new c(this._parents,this.name);return t._fields=new Map(this._fields),t._fields_data=new Map(this._fields_data),t}expand(t){if(!(t instanceof a))throw new TypeError("Parent must be an iPoonyaPrototype instance.");this._parents.push(t)}addField(t,e,s,n){l(e,n,[],this._fields.set.bind(this._fields,t)),this._fields_data.set(t,s)}[n](t){if(t===this.name)return!0;for(let e=0,s=this._parents;e<s;e++)if(this._parents[n](t))return!0;return!1}[r](t,e,s=!0){let n;if(null!=(n=this._fields.get(t)))return s&&0==(this._fields_data.get(t)&i.STATIC)?null:n;for(let i=0,o=this._parents.length;i<o;i++)if(null!=(n=this._parents[i][r](t,e,s)))return n;return null}[o](t,e){for(let[e,s]of this._fields_data)t.field_attrs.set(e,s);const s=[...this._fields_data.entries()].find((t=>t===i.CONSTRUCTOR));null!=s&&"function"==typeof this._fields.get(s[0])&&this._fields.get(s[0]).call(t,e);for(let s=0,n=this._parents.length;s<n;s++)this._parents[s][o](t,e)}toRawData(){return`[Prototype:${this.name}]`}}t.exports=c},809:(t,e,s)=>{"use strict";const n=s(753);class r extends n{constructor(t=null,e,s,n){super(t,e,s,n),this.data=e}clone(){return new r(this.prototype,this.data)}append(t){this.data=t}get(t,e){let s=this.data[t];return"string"==typeof s?new r(this.prototype,s):super.get(t,e)}set(){}remove(){}result(t,e,s,n){n(this.data)}toRawData(){return this.data}}t.exports=r},515:(t,e,s)=>{"use strict";const{Operand:n,Operator:r}=s(501),{CHARTYPE:i,OPERATOR:o,SERVICE:a}=s(351),{UnableToRecognizeTypeException:l,TheSequenceException:c}=s(943),{Cast:u,Tick:d}=s(88),p=s(657),h=s(359);class f extends n{constructor(t,e){super("expression"),this.data=null!=e?[...e]:new Array,this.position=t,this.validated=!1}__sync(t){for(const e of this.data)e instanceof n&&e.__sync(t);return this}isNotDone(){return this.data[this.data.length-1]instanceof r}toString(t){return this.data.map((e=>e.toString(t))).join(" ")}append(t,e){let s;switch(t.type){case i.NUMBER:s=new p(a.CONSTRUCTORS.NUMBER,parseFloat(t.data.toString()),t.position);break;case i.STRING:s=new p(a.CONSTRUCTORS.STRING,t.data.toString(),t.position);break;case i.OPERATOR:s=new r(t);break;case i.WORD:switch(t.data.toString()){case"true":s=new p(a.CONSTRUCTORS.BOOLEAN,!0,t.position);break;case"false":s=new p(a.CONSTRUCTORS.BOOLEAN,!1,t.position);break;case"null":s=new p(a.CONSTRUCTORS.NULL,null,t.position)}break;default:t instanceof r||t instanceof n?s=t:e(t.position,new l(t.type))}0!==this.data.length?s instanceof r&&this.data[this.data.length-1]instanceof r?e(t.position,new c(s,this.data[this.data.length-1])):s instanceof n&&this.data[this.data.length-1]instanceof n&&this.data.push(new r(new h(i.OPERATOR,[0,43],-1))):s instanceof r&&e(t.position,new c(s,"[ExpressionStart]")),this.data.push(s)}complete(t){if(this.data.filter((t=>t.op_p===o.MULT||t.op_p===o.DIVIDE)).length>0){let e=!1,s=Array.from(this.data),n=null;this.data.splice(0,this.data.length);for(let r=0,i=s.length;r<i;r++){if(s[r+1]&&"operator"===s[r+1].type)switch(s[r+1].op_p){case o.MULT:case o.DIVIDE:if(e)break;e=!0,n=new f(s[r+1].position),this.append(n,t);break;case o.PLUS:case o.MINUS:case o.EQUAL:case o.LARGER:case o.LESS:case o.ELARGER:case o.ELESS:case o.OR:case o.AND:if(!e)break;e=!1,n.append(s[r],t),n.complete(),n=null;continue}e?n.append(s[r],t):this.append(s[r],t)}}if(this.data.filter((t=>t.op_p===o.AND)).length>0){let e=Array.from(this.data),s=new f(e[0].position);this.data.splice(0,this.data.length);for(let n=0,r=e.length;n<r;n++)e[n]&&"operator"===e[n].type&&e[n].op_p===o.AND?(s.complete(),this.append(s,t),this.append(e[n],t),s=new f(e[n].position)):s.append(e[n],t);s.complete(),this.append(s,t)}if(this.data.filter((t=>t.op_p===o.OR)).length>0){let e=Array.from(this.data),s=new f(e[0].position);this.data.splice(0,this.data.length);for(let n=0,r=e.length;n<r;n++)e[n]&&"operator"===e[n].type&&e[n].op_p===o.OR?(s.complete(),this.append(s,t),this.append(e[n],t),s=new f(e[n].position)):s.append(e[n],t);s.complete(),this.append(s,t)}this.validated=!0}result(t,e,s,n){let r=this,i=1,a=r.data.length,l=null;function c(){r.data[i+1].result(t,e,s,(e=>{switch(!0){case r.data[i].equals(o.PLUS):l+=e.toRawData();break;case r.data[i].equals(o.MINUS):l-=e.toRawData();break;case r.data[i].equals(o.MULT):l*=e.toRawData();break;case r.data[i].equals(o.DIVIDE):l/=e.toRawData();break;case r.data[i].equals(o.LARGER):l=l>e.toRawData();break;case r.data[i].equals(o.LESS):l=l<e.toRawData();break;case r.data[i].equals(o.EQUAL):l=l==e.toRawData();break;case r.data[i].equals(o.ELARGER):l=l>=e.toRawData();break;case r.data[i].equals(o.ELESS):l=l<=e.toRawData();break;case r.data[i].equals(o.NEQUAL):l=l!=e.toRawData();break;case r.data[i].equals(o.AND):if(l=l&&e.toRawData(),!l)return void u(l,t,[],n);break;case r.data[i].equals(o.OR):if(l=l||e.toRawData(),l)return void u(l,t,[],n)}(i+=2)>=a?u(l,t,[],n):d(c)}))}r.data[0].result(t,e,s,(i=>{i.result(t,e,s,(e=>{l=e,r.data.length>1?c():u(l,t,[],n)}))}))}}t.exports=f},79:(t,e,s)=>{"use strict";const{Operand:n}=s(501),{UnableToCreateAnObjectException:r,FieldNotAFunctionException:i}=s(943),{iPoonyaPrototype:o}=s(161),a=s(329);t.exports=class extends n{constructor(t,e,s){super("call function"),this.query_stack=[...t],this.position=s,this.args=e}__sync(t){for(const e of this.query_stack.concat(this.args))e instanceof n&&e.__sync(t);return this}result(t,e,s,n){t.getByPath(this.query_stack,this.position,null,s,!0,(l=>{l.instance instanceof a?l.instance.result(l.parent,this.args,t,e,this.position,s,n):l.instance instanceof o?s(this.position,new r):s(this.position,new i(this.query_stack[this.query_stack.length-1]))}))}toString(){return"("+this.query_stack.join(" => ")+") <== ("+this.args.join(", ")+")"}}},346:(t,e,s)=>{"use strict";const{Operand:n}=s(501),{SERVICE:r,FIELDFLAGS:i}=s(351),o=s(329);t.exports=class extends n{constructor(t,e){super("get"),this.position=t,this.query_stack=e}__sync(t){for(const e of this.query_stack)e instanceof n&&e.__sync(t);return this}result(t,e,s,n){t.getByPath(this.query_stack,this.position,null,s,!0,(a=>{if(null!=a.instance){if(a.instance instanceof o)return 0!=(a.flags&i.PROPERTY)?a.instance.result(a.parent,[],t,e,this.position,s,n):t.createObject(`[NativeCode:${a.instance.name}]`,this.position,r.CONSTRUCTORS.STRING,s,new Array,n);n(a.instance)}else t.createObject(null,this.position,r.CONSTRUCTORS.NULL,s,new Array,n)}))}toString(){return"("+this.query_stack.join(" => ")+")"}}},281:(t,e,s)=>{"use strict";const{Operand:n}=s(501),{Tick:r,Cast:i}=s(88),{iPoonyaPrototype:o}=s(161),{FieldNotAFunctionException:a}=s(943),l=s(580),c=s(329);t.exports=class extends n{constructor(t,e,s){super("group-output"),this.query_stack=null!=e?[...e]:null,this.position=s,this.body=t,this.body.interrupted()}__sync(t){if(null!=this.query_stack)for(const e of this.query_stack)e instanceof n&&e.__sync(t);return this.body.__sync(t),this}toString(t){return(this.query_stack?"("+this.query_stack.join(" => ")+") <- ":"")+this.body.toString(t)}result(t,e,s,n){const u=this,d=new l;u.body.result(t,d,s,(()=>{null==u.query_stack?r(i.bind(null,d._data,t,[],n)):t.getByPath(u.query_stack,u.position,null,s,!0,(r=>{r.instance instanceof c?r.instance.result(r.parent,d._data,t,e,u.position,s,n):r.instance instanceof o?s(u.position,new UnableToCreateAnObjectException):s(u.position,new a(u.query_stack[u.query_stack.length-1]))}))}))}}},657:(t,e,s)=>{"use strict";const{Operand:n}=s(501),{SERVICE:r}=s(351);class i extends n{constructor(t,e,s){super("object-creator"),this.query_stack=null!=t?t:r.CONSTRUCTORS.OBJECT,this.initial=e,this.position=s}__sync(t){for(const e of this.query_stack)e instanceof n&&e.__sync(t);return this}toString(t="\t"){if(this.initial instanceof Map){const e=[...this.initial.entries()];return"new ("+this.query_stack.map((t=>"string"!=typeof t?`[${t.toString()}]`:t.toString())).join(" => ")+") -> "+(e.length>0?"\n"+e.map(((s,n)=>s[1]instanceof i?t+s[0]+" -> "+s[1].toString(t+"\t"):t+s[0]+" -> "+s[1].toString(t+"\t")+(n+1!=e.length?",":""))).join("\n"):"*")}return`(${this.initial}) <- (${this.query_stack.map((t=>"string"!=typeof t?`[${t.toString()}]`:t.toString())).join(" => ")})`}result(t,e,s,n){t.createObject(this.initial,this.position,this.query_stack,s,new Array,n)}}t.exports=i},923:(t,e,s)=>{"use strict";const{Operand:n}=s(501);t.exports=class extends n{constructor(t,e,s){super("ternar"),this.condition=t,this.v_o=e,this.v_t=s}__sync(t){return this.condition.__sync(t),this.v_o.__sync(t),this.v_t.__sync(t),this}toString(t){return"< "+this.condition.toString(t+"\t")+" > ? "+this.v_o+" : "+this.v_t}result(t,e,s,n){const r=this;r.condition.result(t,e,s,(i=>{t.toBooleanResult(i)?r.v_o.result(t,e,s,n):r.v_t.result(t,e,s,n)}))}}},707:(t,e,s)=>{const{Tick:n}=s(88),{iStatement:r}=s(161);t.exports=class extends r{constructor(t){super(),this.position=t}__sync(t){return this}__executable(){return new Array}toString(){return"break;"}result(t,e,s,r){n(r,this)}}},914:(t,e,s)=>{const{iStatement:n}=s(161),{Tick:r}=s(88);t.exports=class extends n{constructor(t){super(),this.position=t}__sync(t){return this}__executable(){return new Array}toString(){return"continue;"}result(t,e,s,n){r(n,this)}}},602:(t,e,s)=>{"use strict";const{Tick:n}=s(88),{iStatement:r}=s(161);t.exports=class extends r{constructor(t,e,s){super(),this.condition=t,this.body_true=e,this.body_false=s}__sync(t){return this.condition.__sync(t),this.body_true&&this.body_true.__sync(t),this.body_false&&this.body_false.__sync(t),this}__executable(){return[this.body_true,this.body_false].filter((t=>null!=t))}toString(t){return"if ("+this.condition.toString(t)+") "+this.body_true.toString(t)+(null!=this.body_false?" else "+this.body_false.toString(t):"")}result(t,e,s,r){const i=this;i.condition.result(t,e,s,(o=>{t.toBooleanResult(o)?i.body_true.result(t,e,s,r):null!=i.body_false?i.body_false.result(t,e,s,r):n(r,null)}))}}},254:(t,e,s)=>{"use strict";const{Tick:n}=s(88),{iStatement:r}=s(161);t.exports=class extends r{constructor(t){super(),this.expression=t,this.position=t.position}__sync(t){return this.expression.__sync(t),this}__executable(){return new Array}toString(t){return"> "+this.expression.toString(t)}result(t,e,s,r){this.expression.result(t,e,s,(i=>{null!=i?i.result(t,e,s,(t=>{e.write(t),n(r,t)})):n(r,null)}))}}},505:(t,e,s)=>{"use strict";const{Tick:n}=s(88),{TheFieldMustBeAnArrayInstanceExceprion:r}=s(943),{iStatement:i}=s(161),{Operand:o}=s(501),a=s(36);t.exports=class extends i{constructor(t,e,s){super(),this.query_stack=e,this.position=t,this.value=s}__sync(t){this.value.__sync(t);for(const e of this.query_stack)e instanceof o&&e.__sync(t);return this}__executable(){return new Array}toString(t){return"("+this.query_stack.map((t=>"number"==typeof t?`[${t}]`:t)).join(" => ")+") <- "+this.value.toString(t+"\t")}result(t,e,s,i){const o=this;t.getByPath(o.query_stack,o.position,a,s,!1,(a=>{null!=a?o.value.result(t,e,s,(e=>{a.push(t,e),n(i,e)})):s(o.position,new r(o.query_stack[0]))}))}}},91:(t,e,s)=>{"use strict";const{TheFieldMustBeNumberException:n}=s(943),{Tick:r}=s(88),{iStatement:i}=s(161),o=s(220),a=s(707),l=s(914);t.exports=class extends i{constructor(t,e,s){super(),this.from=t,this.to=e,this.body=s,this.body.interrupted(),this.body.continued()}__sync(t){return this.from.__sync(t),this.to.__sync(t),this.body.__sync(t),this}__executable(){return[this.body]}toString(t){return"repeat ("+this.from.toString(t)+"; "+this.to.toString(t)+") "+this.body.toString(t)}result(t,e,s,i){let c,u=this;u.from.result(t,e,s,(d=>{u.to.result(t,e,s,(p=>{d instanceof o||s(u.from.position,new n("From")),p instanceof o||s(u.to.position,new n("To")),d.result(t,e,s,(n=>{p.result(t,e,s,(o=>{function d(e){n+=c,t.popLevel(),r(p,e,c)}function p(c){n==o||c instanceof a?r(i,c instanceof a||c instanceof l?null:c):(t.addLevel(),t.set("current",n,"up"),u.body.result(t,e,s,d,!1))}c=n<o?1:-1,n=Math.floor(n),o=Math.floor(o),p()}))}))}))}))}}},498:(t,e,s)=>{"use strict";const n=s(515),{iPoonyaObject:r,iPoonyaPrototype:i,iContext:o,iStatement:a}=s(161),{GetFieldOfNullException:l,TheFieldNotHasDeclaredExceprion:c}=s(943),{GET:u}=s(351),{Tick:d}=s(88),{Operand:p}=s(501),h=s(753);t.exports=class extends a{constructor(t,e,s){super(),this.query_stack=e,this.position=t,this.value=s}__sync(t){this.value.__sync(t);for(const e of this.query_stack)e instanceof p&&e.__sync(t);return this}__executable(){return new Array}toString(t){return"("+this.query_stack.map((e=>"number"==typeof e||e instanceof p?`[${e.toString(t)}]`:e)).join(" => ")+") = "+this.value.toString(t+"\t")}result(t,e,s,a){let p=this,f=t,T=Array.from(p.query_stack),O=T.length,N=0;function y(n){++N<O?(f instanceof h?f=f.get(n,t):f instanceof o?f=f.get(n):f instanceof i?f=f[u](n,t):s(p.position,new l(n)),S()):f instanceof r||f instanceof o?p.value.result(t,e,s,(e=>{f instanceof o?f.has(n)?f.set(n,e):s(p.position,new c(n)):f.set(t,n,e),d(a,e)})):s(p.position,new l(T[N-1]))}function S(){T[N]instanceof n?T[N].result(t,null,s,(t=>y(t.toRawData()))):y(T[N])}S()}}},530:(t,e,s)=>{"use strict";const{Tick:n}=s(88),{iStatement:r}=s(161),{UnexpectedTokenException:i}=s(943),o=s(707),a=s(914);t.exports=class extends r{constructor(t=!1,e=!1,s=!1){super(),this.Sequence=new Array,this.can_break=t,this.can_continue=e,this.can_return=s}__executable(){return new Array}__sync(t){for(const e of this.Sequence){for(const t of e.__executable())this.can_break&&t.interrupted(),this.can_continue&&t.continued(),this.can_return&&t.terminable();e instanceof o&&!this.can_break&&t(e.position,new i("break")),e instanceof a&&!this.can_continue&&t(e.position,new i("continue")),e.__sync(t)}return this}push(t){this.Sequence.push(t)}interrupted(){this.can_break=!0}continued(){this.can_continue=!0}terminable(){this.can_return=!0}result(t,e,s,r,i=!0){let l=this,c=0,u=l.Sequence.length;function d(t){n(p,t)}function p(p){if(c>=u||p instanceof o&&l.can_break||p instanceof a&&l.can_continue)return i&&t.popLevel(),void n(r,p);l.Sequence[c++].result(t,e,s,d)}i&&t.addLevel(),p(null)}toString(t=0){return`{\n${t}${this.Sequence.map((e=>e.toString(t+"\t"))).join("\n\n"+t)}\n${t.substring(0,t.length-1)}}`}}},404:(t,e,s)=>{"use strict";const{Tick:n}=s(88),{iStatement:r}=s(161),{UnexpectedTokenException:i}=s(943),o=s(707),a=s(914);t.exports=class extends r{constructor(t){super(),this.Sequence=Array.isArray(t)?t:new Array}__sync(t){for(const e of this.Sequence){for(const t of e.__executable())this.can_break&&t.interrupted(),this.can_continue&&t.continued(),this.can_return&&t.terminable();e instanceof o&&t(e.position,new i("break")),e instanceof a&&t(e.position,new i("continue")),e.__sync(t)}return this}__executable(){return new Array}push(t){this.Sequence.push(t)}result(t,e,s,r){let i=this,o=0,a=i.Sequence.length;function l(t){n(c,t)}function c(c){o>=a?c&&"function"==typeof c.result?c.result(t,e,s,(t=>{n(r,t)})):n(r,c):i.Sequence[o++].result(t,e,s,l)}c()}toString(t="\t"){return`{\n${t}${this.Sequence.map((e=>e.toString(t+"\t"))).join("\n\n"+t)}\n${t.substring(0,t.length-1)}}`}}},859:(t,e,s)=>{"use strict";const{TheFieldAlreadyHasBeenDeclaredException:n}=s(943),{Tick:r}=s(88),{iStatement:i}=s(161);t.exports=class extends i{constructor(t,e){super(),this.name=t.toString(),this.position=t.position,this.value=e}__sync(t){return this.value.__sync(t),this}__executable(){return new Array}toString(t){return"set "+this.name+" = "+this.value.toString(t+"\t")}result(t,e,s,i){const o=this;t.has(o.name,"up")?s(o.position,new n(o.name)):o.value.result(t,e,s,(e=>{t.set(o.name,e,"up"),r(i,e)}))}}},887:(t,e,s)=>{const{Tick:n}=s(88),{iStatement:r}=s(161),{Import:i}=s(742),{CannotImportStaticLibrary:o}=s(943);s(515),t.exports=class extends r{constructor(t,e){super(),this.libraries=e,this.position=t}__sync(){return this}__executable(){return new Array}toString(t){return"use "+this.libraries.toString(t)+";"}result(t,e,s,r){this.libraries.result(t,e,s,(a=>{a.result(t,e,s,(e=>{const a=new Array;Array.isArray(e)?a.push(...e.map((t=>null!=t?t.toString():"null")).filter((t=>null!=t))):null!=e&&a.push(e.toString());const l=i(a).filter((t=>null!=t));if(l.length!=a.length){const t=l.map((t=>t.name));s(this.position,new o(a.filter((e=>!t.includes(e)))))}t.import(l,s,!1),n(r)}))}))}}},267:(t,e,s)=>{"use strict";const{Tick:n}=s(88),{iStatement:r}=s(161),i=s(707),o=s(914);t.exports=class extends r{constructor(t,e){super(),this.condition=t,this.body=e,this.body.interrupted(),this.body.continued()}__sync(t){return this.condition.__sync(t),this.body.__sync(t),this}__executable(){return[this.body]}toString(t){return"while ("+this.condition.toString(t)+") "+this.body.toString(t)}result(t,e,s,r){let a=this;!function l(c){a.condition.result(t,e,s,(u=>{!t.toBooleanResult(u)||c instanceof i?n(r,c instanceof i||c instanceof o?null:c):a.body.result(t,e,s,l)}))}(null)}}},943:(t,e,s)=>{"use strict";const{SERVICE:n}=s(351),{dirname:r}=s(386);class i{constructor(t,e,s=!1){this.message="PoonyaException / "+t+(null!=e?": \n"+e:""),this.throwed=s}toString(){return this.message}}class o extends i{constructor(t,e){super("Parser exception / "+t,e)}}class a extends i{constructor(t,e){super("Lexer exception / "+t,e)}}class l extends i{constructor(t,e){super("Linker exception / "+t,e)}}class c extends l{constructor(t){super("An error occured while opening file: '"+t+"'")}}t.exports.IOError=c,t.exports.LinkerIOError=class extends c{constructor(t){super(t)}},t.exports.LexerException=a,t.exports.IsRecursiveLink=class extends i{constructor(t){super('The "'+t+'" source file has a recursive inclusion of itself')}},t.exports.LinkerException=l,t.exports.PoonyaException=i,t.exports.ParserException=o,t.exports.TheSequenceException=class extends o{constructor(t,e){super(`Wrong order: condition operator: '${t.toString()}' after '${e.toString()}'`)}},t.exports.ParserLogicException=class extends o{constructor(){super("The expression has incorrect logic")}},t.exports.GetFieldOfNullException=class extends i{constructor(t){super(`Cannot get property '${t}' of null`)}},t.exports.BadEmptyObjectException=class extends o{constructor(){super("Cannot create an empty object after declaring its keys")}},t.exports.UnexpectedTokenException=class extends o{constructor(t,e){super(`Unexpected token '${t.toString()}'`+(e?`when expected '${e.toString()}'`:""))}},t.exports.UnexpectedTokenStatement=class extends o{constructor(t,e,s){super(`Error parsing the '${t.toString()}' statement. Expected '${s.toString()}', when actually: '${e.toString()}'`)}},t.exports.CannotImportStaticLibrary=class extends i{constructor(...t){super(`library ${t.map((t=>`"${t.name}"`)).join(", ")} cannot be imported, possibly the wrong library identifier for import was specified`)}},t.exports.FieldNotAFunctionException=class extends i{constructor(t){super(`The field '${t}' is not a function`)}},t.exports.BadKeyInvalidTypeException=class extends i{constructor(){super("Wrong key type: it can be set only by a numeric or string key")}},t.exports.IsNotAConstructorException=class extends i{constructor(t){super(`${t.map((t=>"number"==typeof t?"["+t+"]":t.toString())).join(" -> ")} - not a constructor`)}},t.exports.LinkerPathNotGiveException=class extends l{constructor(){super("To use include, you must pass the path to the current execution file")}},t.exports.ParserEmtyArgumentException=class extends o{constructor(){super("It is not possible to pass an empty argument to a function, use null to denote an empty value")}},t.exports.CriticalParserErrorException=class extends o{constructor(){super("Critical parser error")}},t.exports.NativeFunctionExecutionError=class extends i{constructor(t,e){const s=/^\s*at\s(?:new\s)?([aA-zZ.аА-яЯё]+)\s\((.*)\)$/;for(let t,i=0,o=(e=e.split("\n")).length;i<o;i++)if(s.test(e[i])&&(t=e[i].match(s),"NativeFunction.result"===t[1]&&n.ROOTPATH==r(t[2]).substring(0,n.ROOTPATH.length))){e=e.slice(0,i);break}super("Critical error while executing a native function '"+t+"'","* > \t"+e.join("\n * > \t"))}},t.exports.BadKeyProtectedFieldException=class extends i{constructor(){super("Cannot set this field, the field is protected from changes")}},t.exports.TheFieldMustBeNumberException=class extends i{constructor(t){super(`'${t}' must be a number, or a container containing a number`)}},t.exports.BadArrowNotationJumpingTwoLevels=class extends o{constructor(){super("Bad array notation: jumping two levels is not possible")}},t.exports.NativeFunctionReturnValueError=class extends i{constructor(){super("Function can only return simple types")}},t.exports.UnableToRecognizeTypeException=class extends o{constructor(t){super(`Unable to recognize type '${t}'`)}},t.exports.TheFieldNotHasDeclaredExceprion=class extends i{constructor(t){super(`Field '${t}' is not declared`)}},t.exports.UnableToCreateAnObjectException=class extends i{constructor(){super("Unable to create an object by calling its constructor as a function, pick ConstructorName -> *;")}},t.exports.BadArrowNotationJumpingToUpperLevel=class extends o{constructor(){super("Bad array notation: unexpected transition to a upper level")}},t.exports.UnexpectedWordTypeAndGetException=class extends o{constructor(t,e){super(`Expected word type expression and get ${t}[${e}]`)}},t.exports.ParserUnfinishedNotationException=class extends o{constructor(){super("Parser fault: unfinished notation")}},t.exports.TheFieldMustBeAnArrayInstanceExceprion=class extends i{constructor(t){super(`Field '${t}' must be an Array instance`)}},t.exports.TheFieldAlreadyHasBeenDeclaredException=class extends i{constructor(t){super(`The '${t}' field is already declared`)}},t.exports.SegmentationFaultEmptyArgumentException=class extends o{constructor(t){super("Segmentation fault: empty argument for "+t)}},t.exports.InvalidSequenceForLetiableAccessException=class extends o{constructor(){super("Invalid sequence for letiable access")}},t.exports.CriticalParserErrorUnexpectedEndOfExpression=class extends o{constructor(){super("Critical parser error: unexprected end of expression")}},t.exports.CriticalLexerErrorUnexpectedEndOfInputException=class extends a{constructor(){super("Critical lexer error: unexpected end of input")}},t.exports.CriticalParserErrorUnexpectedEndOfInputException=class extends o{constructor(){super("Critical parser error: unexpected end of input")}},t.exports.CriticalParserErrorNoRawDataTransmittedException=class extends o{constructor(){super("Critical parser error: no raw data transmitted")}},t.exports.SegmentationFaultMaximumSegmentsForBlockException=class extends o{constructor(t){super("Segmentation fault exceeded the maximum number of segments for block "+t)}}},161:(t,e,s)=>{"use strict";const n=s(138);t.exports.iContext=class{},t.exports.iPathData=class{constructor(){}},t.exports.iInputData=class{constructor(){}},t.exports.iCodeEmitter=class{},t.exports.iPoonyaObject=class{},t.exports.iPoonyaPrototype=class{},t.exports.iPoonyaConstructsData=class{constructor(){}},t.exports.iStatement=class{__executable(){return new Array}__sync(t){return this}},t.exports.iPoonyaOutputStream=class extends n{constructor(){super()}write(t){}pipe(t){}toReadable(){}complete(){}}},351:(t,e,s)=>{"use strict";const{EventEmitter:n}=s(138),r=Symbol("GET"),i=Symbol("IS"),o=Symbol("SEPER_CALL"),a=Symbol.for("POONYA-"+Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)+"-win32"),l={CONSTRUCTORS:{OBJECT:["Object"],ARRAY:["Array"],BOOLEAN:["Boolean"],STRING:["String"],NUMBER:["Number"],INTEGER:["Integer"],NULL:["Null"],PATTERN:["Pattern"]},CONFIG:{DEBUG:!1},LOADED:!1,ACTIONS:new n,get SPACE(){return s.g[a]}};l.ACTIONS.on("load",(()=>l.LOADED=!0)),l.ACTIONS.setMaxListeners(1/0),t.exports.FIELDFLAGS={NOOUTPUT:1,CONSTANT:2,STATIC:4,PROPERTY:8,CONSTRUCTOR:16},t.exports.SUPER_CALL=o,t.exports.NAMESPACE=a,t.exports.OPERATOR={PLUS:0,MINUS:1,MULT:2,DIVIDE:3,EQUAL:4,NEQUAL:5,LARGER:6,LESS:7,ELARGER:8,ELESS:9,AND:10,OR:11},t.exports.CHARTYPE={START:0,NUMBER:2,WORD:3,SPACE:4,POINT:5,STRING:6,NEWLINE:7,OPERATOR:8},t.exports.SERVICE=l,t.exports.CONFIG=l.CONFIG,t.exports.GET=r,t.exports.IS=i},591:(t,e,s)=>{"use strict";const{Operand:n}=s(501),r=s(360),{GetFieldOfNullException:i,IsNotAConstructorException:o,PoonyaException:a}=s(943),{GET:l,SERVICE:c,IS:u,CONFIG:d}=s(351),{Cast:p,toBytes:h,throwError:f}=s(88),{iContext:T,iPoonyaPrototype:O,iPathData:N,iCodeEmitter:y,iPoonyaObject:S,iPoonyaOutputStream:A}=s(161),{PoonyaStaticLibrary:E}=s(742),{parser:m}=s(190),w=(s(94),s(329)),g=s(515),R=s(753),b=s(36),C=s(550),x=s(220),_=s(809),P=s(839),F=s(679);class v extends Map{constructor(t,e){super(),null!=e&&this.append(t,e)}append(t,e){if("object"!=typeof e)throw new TypeError;if(Array.isArray(e))for(let s=0,n=e.length;s<n;s++)this.set(t,s,e[s]);else if(e instanceof R)for(let s of e.fields)this.set(t,s[0],s[1]);else if(e instanceof v)for(let s of e)this.set(t,s[0],s[1]);else for(let s in e)this.set(t,s,e[s])}get(t){return super.get(t)}set(t,e,s,n=new Array){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("Bad key "+e);try{p(s,t,n,super.set.bind(this,e))}catch(t){d.DEBUG&&console.error(t),console.error("Error when cast value of "+e)}}result(t,e,s){let n=new Object;for(let[r,i]of this)n[r]=i instanceof w?null!=i?i.result(t,e,s):null:null!=i?i.target:null;return n}}class L extends T{constructor(t,e,...s){super(),this.levels=new Array,this.source="",this._lib_cache=new Array,null!=t&&this.import(t,e),this.levels.push(...s.map((t=>t instanceof v?t:"object"==typeof t?new v(this,t):null)).filter((t=>null!==t)))}setSource(t){return this.source=t,this}import(t,e,s=!0){if(null!=t){s&&this.addLevel();for(let s,n=0,r=t.length;n<r;n++)t[n]instanceof E&&!this._lib_cache.includes(t[n].namespace)&&(t[n].global?t[n].importTo(this.levels[0],this,e):(this.createObject(null,-1,c.CONSTRUCTORS.OBJECT,e,new Array,(t=>s=t)),t[n].importTo(s,this,e),this.levels[0].set(this,t[n].namespace,s)),this._lib_cache.push(t[n].namespace))}}eval(t,e){return new Promise(((s,n)=>{m(t,this.source).catch((t=>n(t))).then((r=>{r&&r.sequense.result(this,null!=e?e:new A,((e,s)=>{try{f.call({input:t,path:this.source},e,s)}catch(t){n(t)}}),s)}))}))}clone(){const t=new L(null,null,...this.levels).setSource(this.source);return t._lib_cache=Array.from(this._lib_cache),t}addLevel(t){let e=-1;if(null!=t){if(!(t instanceof v))throw new Error("The level for the context must be heap, or indexed by the heap");e=this.levels.push(t)-1}else e=this.levels.push(new v(this,null))-1;return e}popLevel(t,e=!0){null!=t?this.levels.splice(t,e?1/0:1):this.levels.pop()}get(t){let e=null,s=this.levels.length-1;for(;s>=0&&null==(e=this.levels[s--].get(t)););return e}has(t,e="tree"){switch(e){case"tree":return null!==this.get(t);case"up":return this.levels[this.levels.length-1].has(t);case"root":return this.levels[0].has(t)}}set(t,e,s="tree"){let n;switch(s){case"tree":for(n=this.levels.length;--n>=0;)if(null!=this.levels[n].get(t))return void this.levels[n].set(this,t,e);this.levels[this.levels.length-1].set(this,t,e);break;case"up":this.levels[this.levels.length-1].set(this,t,e);break;case"down":this.levels[0].set(this,t,e)}}getByPath(t,e,s=null,n,r=!1,o){let a=this,c=a,u=null,d=0,p=Array.from(t),h=p.length,f=0;function T(t){c instanceof R?(u=c,d=c.field_attrs.get(t),c=c.get(t,a)):c instanceof L?(u=c,c=c.get(t,a)):c instanceof O?c=c[l](t,a):n(e,new i(t)),++f<h?y():o(null==s||c instanceof s?r?Object.assign(new N,{instance:c,parent:u,index:f,flags:d}):c:null)}function y(){p[f]instanceof g?p[f].result(a,null,n,(t=>{T(t.toRawData())})):T(p[f])}y()}toBooleanResult(t){return t instanceof P?t.data:t instanceof C||t instanceof x?0!=t.data:!(t instanceof F)&&(t instanceof R||t instanceof b||(t instanceof _?0!=t.data.length:null!=t))}createObject(t,e,s,i,a=new Array,l){const c=this;c.getByPath(s,e,O,i,!1,(d=>{let p=new Object,h=0,f=t instanceof Map?Array.from(t.entries()):"object"==typeof t&&null!=t?Object.entries(t):null;function T(){switch(!0){case d[u]("String"):return void l(new _(d,p,c,i));case d[u]("Integer"):return void l(new C(d,p,c,i));case d[u]("Boolean"):return void l(new P(d,p,c,i));case d[u]("Number"):return void l(new x(d,p,c,i));case d[u]("Null"):return void l(new F(d,p,c,i));case d[u]("Array"):return void l(new b(d,p,c,i));case d[u]("Pattern"):l(new r(d,p,c,i));break;default:return void l(new R(d,p,c,i))}}function N(){const t=f[h++];null!=t?a.includes(t[1])?N():t[1]instanceof O||t[1]instanceof S||t[1]instanceof n?t[1].result(c,null,i,A.bind(null,t[0])):A(t[0],t[1]):T()}function A(t,e){p[t]=e,N()}null!=d?"object"!=typeof f||null==f||t instanceof y?(p=t,T()):N():i(e,new o(s))}))}}t.exports.Context=L,t.exports.Heap=v},742:(t,e,s)=>{"use strict";const{NAMESPACE:n,SERVICE:r}=s(351),{IOError:i}=s(943),o=s(329),a=s(326),l=Symbol.for("Modules");null==s.g[n]&&(s.g[n]=new Object),null==s.g[n][l]&&(s.g[n][l]=new Map),null==s.g[n].modules&&(s.g[n].modules=0);class c{constructor(t,e=!1,r=!1,i){u(t,this,r),this.namespace=null!=i?i:"space-"+(++s.g[n].modules).toString(16)+(e?"-global":""),this.global=Boolean(e),this.name=t,this._fields=new Map}addField(t,e){if(t=String(t),this._fields.has(t))throw new Error('The "'+t+'" field alredy exists');this._fields.set(t,e)}expandPrototype(t){if(!Object.prototype.isPrototypeOf.call(a,t))throw new Error("Only PoonyaPrototype instance can be passed as a prototype.");this._fields.has(t.name)?this._fields.get(t.name).expand(t):this._fields.set(t.name,t)}addLib(t){const e=s.g[n][Symbol.for("Modules")][Symbol.for(t)];if(null==e)throw new Error(`Can't find library with identifier ${t}`);this._fields.set(e.namespace,e)}importTo(t,e,s){for(let[n,i]of this._fields)switch(typeof i){case"bigint":isNaN(i)?e.createObject(null,-1,r.CONSTRUCTORS.NULL,s,new Array,(s=>t.set(e,n,s))):e.createObject(i,-1,r.CONSTRUCTORS.INTEGER,s,new Array,(s=>t.set(e,n,s)));break;case"number":isNaN(i)?e.createObject(null,-1,r.CONSTRUCTORS.NULL,s,new Array,(s=>t.set(e,n,s))):e.createObject(i,-1,r.CONSTRUCTORS.NUMBER,s,new Array,(s=>t.set(e,n,s)));break;case"string":e.createObject(i,-1,r.CONSTRUCTORS.STRING,s,new Array,(s=>t.set(e,n,s)));break;case"symbol":e.createObject(Symbol.keyFor(i),-1,r.CONSTRUCTORS.STRING,s,new Array,(s=>t.set(e,n,s)));break;case"function":Object.prototype.isPrototypeOf.call(a,i)?t.set(e,(i=new i(e,s)).name,i):t.set(e,n,new o(i));break;case"boolean":e.createObject(i,-1,r.CONSTRUCTORS.BOOLEAN,s,new Array,(s=>t.set(e,n,s)));break;case"undefined":case"object":null==i?e.createObject(null,-1,r.CONSTRUCTORS.NULL,s,new Array,(s=>t.set(e,n,s))):i instanceof c?e.createObject(null,-1,r.CONSTRUCTORS.OBJECT,s,new Array,(r=>{i.importTo(r,e,s),t.set(e,n,r)})):i instanceof Array?e.createObject(i,-1,r.CONSTRUCTORS.ARRAY,s,new Array,(s=>t.set(e,n,s))):e.createObject(i,-1,r.CONSTRUCTORS.OBJECT,s,new Array,(s=>t.set(e,n,s)))}}}let u=(t,e,r=!1)=>{if(t=Symbol.for(t),null==s.g[n][l][t])s.g[n][l][t]=e;else{if(!r||null==s.g[n][l][t])throw new TypeError("Library, with this id already imported. For "+t.toString());Object.assign(s.g[n][l][t],e)}},d=async()=>{};function p(t){if("poonya"===t)return s(40);throw new Error("Unknown module "+t)}d=(t,e)=>{const s=t+"/"+e;return new Promise(((t,e)=>{try{fetch(s,{method:"GET"}).then((t=>t.text())).then((e=>t(new Function("require",`"use strict";${wait}`)(p))))}catch(t){e(new i(s))}}))},t.exports.Import=t=>{if(!(t instanceof Array))throw new TypeError("import_statements must be Array");const e=new Array;for(let r=0,i=t.length;r<i;r++)e.push(s.g[n][l][Symbol.for(t[r])]);return e},t.exports.ImportFile=d,t.exports.PoonyaStaticLibrary=c},359:(t,e,s)=>{"use strict";const{CHARTYPE:n}=s(351),{fromBytes:r}=s(88);t.exports=class{constructor(t,e,s,n){this.type=t,this.data=r(e),this.position=s-e.length>0?s-e.length+1:0,this.leng=e.length,this.string_separator=null!=n?String.fromCharCode(n):null,null!=n&&(this.position-=4)}equals(t,e){return t==this.type&&(null==e||(Array.isArray(e)?e.includes(this.toString()):this.toString()==e))}contentEquals(t){return Array.isArray(t)?t.includes(this.toRawString()):this.toRawString()==t}toString(){return this.type!=n.STRING?this.data:this.string_separator+this.data+this.string_separator}toRawString(){return this.data}}},94:(t,e,s)=>{"use strict";const{CriticalLexerErrorUnexpectedEndOfInputException:n}=s(943),{CHARTYPE:r}=s(351),i=s(359),{throwError:o,fromBytes:a}=s(88);t.exports=function(t,e=!0,s=0){if(!Array.isArray(t))throw TypeError("Only array-like data can be input to the lexer");let l=new Array,c=!1,u=!1,d=!1,p=null,h=null,f=null,T=null;const O=new Array,N=()=>{l.splice(0,l.length)},y=e=>{l.push(t[e],t[e+1])},S=(...t)=>t.includes(l[1]),A=(...t)=>t.includes(l[l.length-1]);for(let n=0,o=t.length;n<o;n+=2){if(0!=t[n])f=r.WORD;else switch(t[n+1]){case 32:case 9:f=r.SPACE;break;case 46:f=r.POINT;break;case 10:case 13:f=r.NEWLINE;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:f=r.NUMBER;break;case 34:case 39:case 96:f=r.STRING;break;case 60:case 61:case 62:case 63:case 43:case 44:case 45:case 47:case 40:case 41:case 42:case 59:case 58:case 38:case 123:case 124:case 125:case 91:case 93:case 33:f=r.OPERATOR;break;default:f=r.WORD}if(f===r.NEWLINE&&T===r.NEWLINE||f===r.POINT&&T===r.NUMBER||f===r.NUMBER&&T===r.WORD)y(n);else if(f!==r.NUMBER||T!==r.OPERATOR||!S(43,45)||null!=h&&h.type==r.NUMBER){if(f===r.OPERATOR&&T===r.OPERATOR){if(2===l.length&&S(33,60,62)&&0===t[n]&&61===t[n+1]){if(y(n),(e||T!==r.SPACE)&&O.push(h=new i(T,l,s+n,p)),p=null,N(),T=void 0,n+1===o)return O;continue}if(0===t[n]&&2===l.length&&S(47)){if(47===t[n+1]){u=!0,d=!1;continue}if(62===t[n+1]){u=!0,d=!0;continue}}}if(c||u)if(u){if(d){if(0===t[n]&&47===t[n+1]&&A(60)){u=!1,T=void 0,N();continue}}else if(f===r.NEWLINE){u=!1,T=r.NEWLINE,N();continue}y(n)}else{if(f===r.STRING&&t[n+1]===p&&0===t[n]){c=!1,T=f;continue}y(n),T=f}else{if(f===T&&T!==r.STRING&&T!==r.OPERATOR||null==T||((e||T!==r.SPACE)&&O.push(h=new i(T,l,s+n,p)),p=null,N()),f===r.STRING){c=!0,p=t[n+1],T=f;continue}y(n),T=f}}else T=f,y(n)}return(u||c)&&o.call({input:a(t)},s+t.length-1,new n),u||!e&&f===r.SPACE||0==l.length||O.push(new i(f,l,s+t.length-l.length-1,p)),O}},700:(t,e,s)=>{const{toBytes:n,fromBytes:r}=s(88);t.exports=class{constructor(t,e,s){this.name=t,this.raw=n(e),this.from=s,this.to=s+2*this.raw.length}isOwnChunckPosition(t){return t>=this.from&&t<=this.to}toString(){return r(this.raw)}}},946:t=>{t.exports=class{constructor(t,e){this.contents=t,this.chuncks=e}getOwnChunck(t){for(const e of this.chuncks)if(e.isOwnChunckPosition(t))return e;return null}}},478:(t,e,s)=>{"use strict";const{maybeEquals:n}=s(88),{CHARTYPE:r}=s(351),{IOError:i}=s(943),o=s(943),a=s(94),l=s(700),c=s(946);t.exports=async function(t,e,s){const i=new c(t,[]);for(let c=0;;c++){if(null==t[c])return i;if(t[c].equals(r.WORD,"include")&&n(t,c+1,r.NEWLINE)&&t[c+1].equals(r.STRING)){let n,u,d=i.getOwnChunck(t[c].position),p=null==d?e:d.name;if(n=window.location.origin+"/"+p.split("/").slice(0,-1).join("/")+"/"+t[c+1].data.toString(),n=n.split("/").pop().split(".").length>0?n:n+".po",u=fetch(n,{method:"GET"}).then((t=>t.text())),n==p&&s(t[c].position,new o.IsRecursiveLink(p)),null!=p)try{const e=new l(n,await u,t[c].position),s=a(e.raw,!1),o=s[s.length-1].position;for(const e of t.slice(c))e.position+=o;for(const e of s)e.position+=t[c].position;t.splice(c,t[2+c--].equals(r.OPERATOR,";")?3:2,...s),i.chuncks.push(e)}catch(e){s(t[c].position,new o.LinkerIOError(n))}else s(t[c].position,new o.LinkerPathNotGiveExceptrion)}}}},938:t=>{t.exports=class{constructor(t,e){this.linker_data=t,this.sequense=e}}},190:(t,e,s)=>{"use strict";const{PoonyaException:n,BadEmptyObjectException:r,ParserEmtyArgumentException:i,UnexpectedTokenException:o,BadArrowNotationJumpingToUpperLevel:a,BadArrowNotationJumpingTwoLevels:l,ParserLogicException:c,InvalidSequenceForLetiableAccessException:u,CriticalParserErrorUnexpectedEndOfInputException:d,SegmentationFaultEmptyArgumentException:p,SegmentationFaultMaximumSegmentsForBlockException:h,UnexpectedTokenStatement:f,UnexpectedWordTypeAndGetException:T,CriticalParserErrorException:O,CriticalParserErrorNoRawDataTransmittedException:N,CriticalParserErrorUnexpectedEndOfExpression:y,ParserUnfinishedNotationException:S}=s(943),{maybeEquals:A,countKeys:E,throwError:m,toBytes:w}=s(88),{CHARTYPE:g,SERVICE:R}=s(351),b=s(938),C=s(887),x=s(79),_=s(657),P=s(923),F=s(515),v=s(346),L=s(602),j=s(530),I=s(254),k=s(267),q=s(91),U=s(859),D=s(498),B=s(505),M=s(404),G=s(281),W=s(707),$=s(914),H=s(478),V=s(94),Y=s(946),J=["true","false","null"];function K(t,e,s,n,r){const i=et(e,s,n,",",1/0,`(${t.map((t=>"number"==typeof t?`[${t}]`:t)).join(" => ")})()`);return{data:new x(t,i.data,r),jump:i.jump}}function z(t,e,s,n,i=0){let c=null,u=0,d=new Array([]),p=e,h=0;for(let f=e;;f++)switch(!0){case void 0===s[f]||3===h&&!s[f].equals(g.OPERATOR,",")||s[f].equals(g.OPERATOR,[";",")"]):if(1!=d.length)return 2!=d[d.length-1].length&&n(s[f].position,new S),{data:new _(t,new Map(d),s[e].position),jump:f-e};if(0!=d[d.length-1].length)return 1==d[d.length-1].length?{data:new _(t,d[0][0],s[e].position),jump:f-e}:{data:new _(t,new Map(d),s[e].position),jump:f-e};n(s[f].position,new S);case s[f].equals(g.OPERATOR,"*")&&0===h:return 1!==d.length&&n(s[f].position,new r),{data:new _(t,new Map,s[e].position),jump:f-e};case s[f].equals(g.NEWLINE):continue;default:switch(h){case 0:s[f].equals(g.WORD)||s[f].equals(g.STRING)||s[f].equals(g.NUMBER)?d[d.length-1][0]=s[f].toRawString():n(s[f].position,new o(s[f],"[Word]")),h=1;continue;case 1:if(u=E(s,f,g.OPERATOR,"-"),u===i+1)f+=u,s[f].equals(g.OPERATOR,">")||n(s[f].position,new o(s[f],">")),h=2;else{if(d.pop(),u<i+1)return{data:new _(t,new Map(d),s[e].position),jump:p-e};n(s[f].position,new a)}continue;case 2:u=E(s,f+1,g.OPERATOR,"-"),null!=s[f+i+3]&&(s[f].equals(g.WORD)||s[f].equals(g.NUMBER))&&u===i+2&&s[f+i+3].equals(g.OPERATOR,">")?(c=z(R.CONSTRUCTORS.OBJECT,f,s,n,i+1),f+=c.jump-1,d[d.length-1][1]=c.data,h=3):u>i+2?n(s[f+1].position,new l):(c=tt(f,s,n,[",",";"]),d[d.length-1][1]=c.data,h=3,s[f].equals(g.OPERATOR,";")?f+=c.jump-2:f+=c.jump-1);continue;case 3:d.push([]),p=f,h=0;continue}}}function Q(t,e,s,n){let r=0,o=new Array,a=new Array;function l(t){0!==o.length?(a.push(tt(0,o,n).data),o.splice(0,o.length)):n(null!=t?t.position:s[e].position,new i)}for(let u=e;;u++)switch(!0){case void 0===s[u]||s[u].equals(g.OPERATOR,";")||s[u].equals(g.NEWLINE)||s[u].equals(g.OPERATOR,")")&&r<=0:return l(s[u]),void 0!==a[0]&&void 0!==a[1]||n(s[e].position,new i),{data:new P(t,a[0],a[1]),jump:u-e-(s[u]&&s[u].equals(g.OPERATOR,")")?1:0)};case s[u].equals(g.OPERATOR,"("):o.push(s[u]),r++;break;case s[u].equals(g.OPERATOR,")"):o.push(s[u]),r--;break;case s[u].equals(g.OPERATOR,":")&&0===r&&0===a.length:l(s[u]);break;case s[u].equals(g.OPERATOR,":")&&0===r&&0!==a.length:n(s[u].position,new c);break;default:o.push(s[u])}}function X(t,e,s,n){const r=st(e,t,n);return{data:new G(r.data,s,e),jump:r.jump}}function Z(t,e,s){let n=new Array,r=!0,i=0,o=0;if(0===e.length)return{data:[],jump:0};for(let a=t;;a++)switch(A(e,a,g.NEWLINE),!0){case null==e[a]||r&&!e[a].equals(g.WORD)||!r&&!e[a].equals(g.OPERATOR,"[")&&!e[a].equals(g.POINT):return{data:n,jump:a-t};case e[a].equals(g.WORD)&&r:n.push(e[a].toString()),r=!r;continue;case e[a].equals(g.POINT)&&!r:r=!r;continue;case e[a].equals(g.OPERATOR,"[")&&!r:for(a++,i=0,o=a;null!=e[a]&&(!e[a].equals(g.OPERATOR,"]")||0!==i);)e[a].equals(g.OPERATOR,"[")?i++:e[a].equals(g.OPERATOR,"]")&&i--,a++;0!=i&&s(e[a].position,new c),n.push(tt(0,e.slice(o,a),s).data);continue;default:s(e[a].position,new u);continue}}function tt(t,e,s,n=";"){if(0===e.length)return{data:new F(0),jump:0};const r=new F(e[0].position),i=new Array;for(let o=t;;o++){if(null==e[o]||e[o].equals(g.OPERATOR,")")||e[o].contentEquals(n))return r.isNotDone()&&s(e[o-1].position,null==e[o]?new d:new y),r.complete(s),{data:r,jump:o-t};if(!e[o].equals(g.NEWLINE))switch(!0){case e[o].equals(g.WORD):if(J.includes(e[o].toString())){r.append(e[o],s);continue}i[0]=Z(o,e,s),null!=e[o+i[0].jump]&&e[o+i[0].jump].equals(g.OPERATOR,"(")?(i[1]=K(i[0].data,o+i[0].jump+1,e,s,e[o].position),o+=i[0].jump+i[1].jump+1,r.append(i[1].data,s)):null!=e[o+i[0].jump+1]?e[o+i[0].jump].equals(g.OPERATOR,"-")?e[o+i[0].jump+1].equals(g.OPERATOR,">")?(i[1]=z(i[0].data,o+i[0].jump+2,e,s,0),o+=i[0].jump+i[1].jump+1,e[o+1]&&e[o+1].equals(g.OPERATOR,"*")&&(o+=1),r.append(i[1].data,s)):(r.append(new v(e[o].position,i[0].data),s),o+=i[0].jump-1):e[o+i[0].jump].equals(g.OPERATOR,"<")&&e[o+i[0].jump+1].equals(g.OPERATOR,"-")?(i[1]=X(e,o+i[0].jump+3,i[0].data,s),o+=i[0].jump+i[1].jump+1,r.append(i[1].data,s)):(r.append(new v(e[o].position,i[0].data),s),o+=i[0].jump-1):(r.append(new v(e[o].position,i[0].data),s),o+=i[0].jump-1);continue;case null!=e[o+1]&&e[o+1].equals(g.OPERATOR,">")&&A(e,o+2,g.NEWLINE)&&e[o].equals(g.OPERATOR,"-"):i[0]=z(R.CONSTRUCTORS.OBJECT,o+2,e,s,0),o+=i[0].jump+2,r.append(i[0].data,s);continue;case e[o].equals(g.OPERATOR,"{"):i[0]=X(e,o+1,null,s),o+=i[0].jump+1,r.append(i[0].data,s);continue;case e[o].equals(g.OPERATOR,"("):i[0]=tt(o+1,e,s),o+=i[0].jump+1,r.append(i[0].data,s);continue;case e[o].equals(g.OPERATOR,"?"):return r.complete(s),i[0]=Q(new F(e[o].position,r.data),o+1,e,s),{data:i[0].data,jump:o-t+i[0].jump+2};case e[o].equals(g.STRING)||e[o].equals(g.NUMBER)||e[o].equals(g.OPERATOR,["/","*","+","-","!=",">","<",">=","<=","=","|","&"]):r.append(e[o],s);continue;default:return r.isNotDone()&&s(e[o-1].position,new y),r.complete(s),{data:r,jump:o-t}}}}function et(t,e,s,n=",",r=1/0,i="unknown"){let o=0,a=[new Array];for(let l=t;;l++)if(null==e[l]||!e[l].equals(g.NEWLINE))switch(!0){case void 0===e[l]||e[l].equals(g.OPERATOR,")")&&o<=0:return a.length>0&&a[a.length-1].length>0?a[a.length-1]=tt(0,a[a.length-1],s).data:a.length>1?s(e[l-1].position,new p(i)):a.splice(a.length-1,1),{data:a,jump:l-t};case e[l].equals(g.OPERATOR,"("):o++,a[a.length-1].push(e[l]);continue;case e[l].equals(g.OPERATOR,")"):o>0?(o--,a[a.length-1].push(e[l])):s(e[l].position,new c);continue;case e[l].contentEquals(n)&&0===o:a[a.length-1].length>0?(a[a.length-1]=tt(0,a[a.length-1],s).data,a.push(new Array),a.length>r&&s(e[l].position,new h(i))):s(e[l].position,new p(i));break;default:a[a.length-1].push(e[l])}}function st(t,e,s){let n=0,r=new Array;for(let i=t;;i++)switch(!0){case void 0===e[i]||e[i].equals(g.OPERATOR,"}")&&n<1:return{data:rt(0,r,s).data,jump:i-t};case e[i].equals(g.OPERATOR,"{"):n++,r.push(e[i]);continue;case e[i].equals(g.OPERATOR,"}"):n-- >0?r.push(e[i]):s(e[i].position,new c);continue;default:r.push(e[i]);continue}}function nt(t,e,s){let n=t,r=new Array;if(A(e,n+1,g.NEWLINE)&&e[n+1].equals(g.OPERATOR,"("))if(r[0]=et(n+2,e,s,"",1,"if"),n+=r[0].jump+3,A(e,n,g.NEWLINE)&&e[n].equals(g.OPERATOR,"{")){if(r[1]=st(n+1,e,s),n+=r[1].jump+1,null==e[n+1]||!e[n+1].equals(g.WORD,"else"))return{data:new L(r[0].data[0],r[1].data),jump:n-t};if(A(e,n+2,g.NEWLINE)&&e[n+2].equals(g.OPERATOR,"{"))return r[2]=st(n+3,e,s),n+=r[2].jump+3,{data:new L(r[0].data[0],r[1].data,r[2].data),jump:n-t};if(A(e,n+2,g.NEWLINE)&&e[n+2].equals(g.WORD,"if"))return r[2]=nt(n+2,e,s),n+=r[2].jump+2,{data:new L(r[0].data[0],r[1].data,r[2].data),jump:n-t};s(e[n+2].position,new f("else",e[n+2].toString(),"{"))}else s(e[n].position,new f("if",e[n].toString(),"{"));else s(e[n+1].position,new f("if",e[n+1].toString(),"("))}function rt(t,e,s){const r=new j,a=new Array;for(let l=t,c=e.length;;l++)try{if(null==e[l])return{data:r,jump:l-t};switch(!0){case e[l].equals(g.NEWLINE)||e[l].equals(g.OPERATOR,";"):continue;case e[l].equals(g.OPERATOR,">"):a[0]=tt(l+1,e,s),l+=a[0].jump+1,r.push(new I(a[0].data));continue;case e[l].equals(g.WORD,"if"):a[0]=nt(l,e,s),l+=a[0].jump,r.push(a[0].data);continue;case e[l].equals(g.WORD,"use"):a[0]=tt(l+1,e,s),r.push(new C(e[l+1].position,a[0].data)),l+=a[0].jump+1;continue;case e[l].equals(g.WORD,"while"):l+1<c&&A(e,l+1,g.NEWLINE)&&e[l+1].equals(g.OPERATOR,"(")?(a[0]=et(l+2,e,s,"",1,"while"),l+=a[0].jump+3,A(e,l,g.NEWLINE)&&e[l].equals(g.OPERATOR,"{")?(a[1]=st(l+1,e,s),l+=a[1].jump+1,r.push(new k(a[0].data[0],a[1].data))):s(e[l].position,new f("while",e[l].toString(),"{"))):s(e[l+1].position,new f("while",e[l+1].toString(),"("));continue;case e[l].equals(g.WORD,"repeat"):l+1<c&&A(e,l+1,g.NEWLINE)&&e[l+1].equals(g.OPERATOR,"(")?(a[0]=et(l+2,e,s,[";",","],2,"repeat"),l+=a[0].jump+3,a[0].data.length<2&&s(e[l].position,new i),A(e,l,g.NEWLINE)&&e[l].equals(g.OPERATOR,"{")?(a[1]=st(l+1,e,s),l+=a[1].jump+1,r.push(new q(a[0].data[0],a[0].data[1],a[1].data))):s(e[l].position,new f("repeat",e[l].toString(),"{"))):s(e[l+1].position,new f("repeat",e[l+1].toString(),"("));continue;case e[l].equals(g.WORD,"set"):if(l+1<c&&A(e,l+1,g.NEWLINE)&&e[l+1].equals(g.WORD)){if(l+2<c&&A(e,l+2,g.NEWLINE)&&e[l+2].equals(g.OPERATOR,"=")){a[0]=tt(l+3,e,s),r.push(new U(e[l+1],a[0].data)),l+=a[0].jump+3;continue}s(e[l+3].position,new T(e[l+2].toString(),e[l+2].type))}else s(e[l+2].position,new T(e[l+1].toString(),e[l+1].type));continue;case e[l].equals(g.WORD,"break"):r.push(new W(e[l].position));continue;case e[l].equals(g.WORD,"continue"):r.push(new $(e[l].position));continue;case e[l].equals(g.WORD):a[0]=Z(l,e,s),l+a[0].jump<c?e[l+a[0].jump].equals(g.OPERATOR,"=")?(a[1]=tt(a[0].jump+l+1,e,s),r.push(new D(e[l+a[0].jump].position,a[0].data,a[1].data)),l+=a[0].jump+a[1].jump+1):e[l+a[0].jump].equals(g.OPERATOR,"<")?e[l+a[0].jump+1].equals(g.OPERATOR,"-")?e[l+a[0].jump+2].equals(g.OPERATOR,"{")?(a[0]=tt(l,e,s),r.push(a[0].data),l+=a[0].jump):(a[1]=tt(a[0].jump+l+2,e,s),r.push(new B(e[l+a[0].jump].position,a[0].data,a[1].data)),l+=a[0].jump+a[1].jump+2):s(e[l+a[0].jump+1].position,new o(e[l+a[0].jump+1].toString(),"-")):e[l+a[0].jump].equals(g.OPERATOR,"-")?e[l+a[0].jump+1].equals(g.OPERATOR,">")?(a[0]=tt(l,e,s),r.push(a[0].data),l+=a[0].jump):s(e[l+a[0].jump+1].position,new o(e[l+a[0].jump+1].toString(),"-")):e[l+a[0].jump].equals(g.OPERATOR,"(")?(a[1]=tt(l,e,s),r.push(a[1].data),l+=a[1].jump):s(e[l].position,new u):l+=a[0].jump;continue;case e[l].equals(g.NUMBER)||e[l].equals(g.STRING)||e[l].equals(g.WORD,["true","false","null"])||e[l].equals(g.OPERATOR,"{"):a[0]=tt(l,e,s),r.push(a[0].data),l+=a[0].jump;continue;default:s(e[l].position,new o(e[l].toString(),"*"))}}catch(t){if(R.CONFIG.DEBUG&&console.trace(t),t instanceof n)throw t;0!=e.length?null!=e[l]?s(e[l].position,new O):s(e[e.length-1].position,new d):s(0,new N)}}t.exports.parser=async function(t,e){const s=await H(V(w(t),!1),e,m),n=new b(s),r=m.bind({data:n,path:e,input:t});return n.sequense=new M(rt(0,s.contents,r).data.Sequence).__sync(r),n},t.exports.parserMP=async function(t,e,s){let n=0,r=new Array,i=new M,a=new Array,l=V(w(t),!0),c=m.bind({path:s,input:t});for(let o=0;null!=l[o];o++)if((null==e&&l[o].equals(g.OPERATOR,"{")||null!=e&&l[o].contentEquals(e.toString())&&(l[o+1].equals(g.OPERATOR,"{")||l[o+1].equals(g.SPACE)&&l[o+2].equals(g.OPERATOR,"{")))&&0===n)null!=e&&(o+=l[o+1].equals(g.SPACE)?2:1),r.length>0&&(i.push(new I(new _(R.CONSTRUCTORS.STRING,r.join(""),l[o].position))),r.splice(0,r.length)),n++;else if(l[o].equals(g.OPERATOR,"}")&&1===n){const e=await H(r.filter((t=>t.type!==g.SPACE)),s,m),o=new b(e),l=m.bind({data:o,path:s,input:t});i.push(rt(0,e.contents,l).data),r.splice(0,r.length),a.push(...e.chuncks),n--}else{if(n>=1)switch(!0){case l[o].equals(g.OPERATOR,"{"):n++;break;case l[o].equals(g.OPERATOR,"}"):n--}0===!n?r.push(l[o].toString()):r.push(l[o])}if(0!==r.length)if(1===n){const e=await H(r.filter((t=>t.type!==g.SPACE)),s,o),n=new b(e),o=m.bind({data:n,path:s,input:t});i.push(rt(0,e.contents,o).data),a.push(...e.chuncks),r.splice(0,r.length)}else 0===n?0!=r.length&&(i.push(new I(new _(R.CONSTRUCTORS.STRING,r.join(""),l[l.length-1].position))),r.splice(0,r.length)):c(l[l.length-1].position,new o(l[l.length-1],"}"));const u=i.__sync(c);return new b(new Y(u,a),u)},t.exports.parseExpression=tt},216:(t,e,s)=>{"use strict";t=s.nmd(t);const{EventEmitter:n}=s(138),{IOError:r,PoonyaException:i}=s(943),{Import:o,ImportDir:a,ImportFile:l}=s(742),{Context:c,Heap:u}=s(591),{parser:d,parseExpression:p,parserMP:h}=s(190),{SERVICE:f}=s(351),{toFixed:T,toBytes:O,fromBytes:N,setImmediate:y,throwError:S,createCustomErrorHandler:A}=s(88),{iPoonyaConstructsData:E,iCodeEmitter:m}=s(161),w=s(580),g=s(94),R=Symbol("RESULT"),b=Symbol("INIT");class C extends m{constructor(t,e=[],s=console,i){super();const o=this,a=new n;if(o.on=a.on,o.once=a.once,o.emit=a.emit,o.input=null,o.loaded=!1,o.logger=s,"string"==typeof t)o.input=t,o.charset="utf-8",o.path=window.location.href,f.LOADED?(o[b](e,s),y((()=>i.call(o)))):f.ACTIONS.on("load",(()=>{o[b](e,s),i.call(o)}));else{if("object"!=typeof t)throw new Error("BAD_DATA_FORMAT");if(o.charset="string"==typeof t.charset?t.charset:"utf-8",o.path="string"==typeof t.path?t.path.split("/").pop().split(".").length>0?t.path:t.path+".po":"anonymous.po","string"==typeof t.raw)o.input=t.raw;else{if("string"!=typeof t.path)throw new Error("BAD_DATA_FORMAT");try{fetch(t.path,{method:"GET"}).catch((t=>{throw t})).then((t=>t.text())).then((t=>{o.input=t,f.LOADED?(o[b](e,s),i.call(o)):f.ACTIONS.on("load",(()=>{o[b](e,s),i.call(o)}))}))}catch(e){throw new r(t.path)}}}}[b](t){this.libraries=o(["default",...t]),this.import=t,this.data=null}[R](t,e,s,n){if(Array.isArray(t))this.data.sequense.result(new c(this.libraries,e,...t).setSource(this.path),s,e,(()=>s.end()));else if(t instanceof c)if(n){const n=t.clone();n.import(this.libraries),this.data.sequense.result(n,s,e,(()=>s.end()))}else this.data.sequense.result(t,s,e,(()=>s.end()));else this.data.sequense.result(new c(this.libraries,e,t).setSource(this.path),s,e,(()=>s.end()))}result(t=new u,e=S.bind(this),s=!1){const n=new w,r=A(e,n);return this.loaded?y((()=>this[R](t,r,n,s))):this.on("load",(()=>this[R](t,r,n,s))),n}}class x extends C{constructor(t,e="poonya",s,n=console){super(t,s,n,(async()=>{try{this.data=await h(this.input,e,this.path)}catch(t){this.emit("error",t)}this.loaded=!0,this.emit("load")}))}}class _ extends C{constructor(t,e,s=console){super(t,e,s,(async()=>{try{this.data=await d(this.input,this.path)}catch(t){this.emit("error",t)}this.loaded=!0,this.emit("load")}))}}(async()=>{s(990),s(722),f.ACTIONS.emit("load")})(),(()=>{const t=new Event("poonya:load");document.addEventListener("DOMContentLoaded",(async()=>{const e=document.querySelectorAll('script[type="text/poonya"], script[lang="text/poonya"]');for(let t,s,n,r,i,o,a=0,l=e.length;a<l;a++){if(t=e[a].getAttribute("name")??"block-"+a,s=e[a].getAttribute("handler")??"exec",n=(e[a].getAttribute("import")??"").split("|"),r=new Event("poonya:load:"+t),i=new Event("poonya:error:"+t),"exec"==s)o=new _(e[a].innerHTML,n);else{if("message"!=s)throw new Error('Unknown pattern handler in block "'+t+'" type "'+s+'"');o=new x(e[a].innerHTML,n)}await new Promise(((t,s)=>{o.on("load",(async()=>{e[a].replaceWith(...(await o.result().complete()).map((t=>{return e=t,(s=document.createElement("template")).innerHTML=e,s.content.cloneNode(!0);var e,s}))),window.dispatchEvent(r),t()})),o.on("error",(e=>{window.dispatchEvent(i),t()}))}))}window.dispatchEvent(t)}))})(),t.exports.CodeEmitter=C,t.exports.MessagePattern=x,t.exports.PoonyaOutputStream=w,t.exports.ExpressionPattern=class extends C{constructor(t,e,s=console){super(t,e,s,(()=>{try{this.data=p(0,g(O(this.input),!1)).data}catch(t){this.emit("error",t)}this.loaded=!0,this.emit("load")}))}[R](t,e,s){return new Promise((n=>{if(t instanceof c)if(s){const s=t.clone();s.import(this.libraries,e),this.data.sequense.result(s,[],e,(t=>t.result(s,null,null,n)))}else this.data.sequense.result(t,[],e,(e=>e.result(t,null,null,n)));else if(Array.isArray(t)){const s=new c(this.libraries,e,...t).setSource(this.path);this.data.sequense.result(s,[],e,(t=>t.result(s,null,null,n)))}else{const s=new c(this.libraries,e,...t).setSource(this.path);this.data.sequense.result(s,[],e,(t=>t.result(s,null,null,n)))}}))}result(t=new u,e=S.bind(this),s=!1){const n=this;return new Promise((r=>{n.loaded?n[R](t,e,s).then(r).catch((t=>{throw t})):n.on("load",(()=>n[R](t,e,s).then(r))).catch((t=>{throw t}))}))}},t.exports.ExecutionPattern=_,t.exports.createPattern=function(t,...e){if(Object.prototype.isPrototypeOf.call(C,t))return t=new t(...e),new Promise(((e,s)=>{t.on("load",((...s)=>e(Object.assign(new E,{data:t,args:s})))),t.on("error",((...t)=>s(...t)))}));throw new Error('The "Pattern" must be a "CodeEmitter" heir')},t.exports.createContext=function(e=new Object,...s){if("object"!=typeof e||null==e)throw new Error('Param "data" must be an object.');return s=s.flat(1/0).filter((t=>"string"==typeof t)),new Promise((n=>{f.LOADED?n(new c(o(["default",...s]),S.bind({input:"",charset:"utf-8",path:"untitled.po",logger:console}),e).setSource(t.parent.filename)):f.ACTIONS.on("load",(()=>{n(new c(o(["default",...s]),S.bind({input:"",charset:"utf-8",path:"untitled.po",logger:console}),e).setSource(t.parent.filename))}))}))},t.exports.ImportFile=l.bind(null,null!=t.parent?t.parent.path:t.path);const P=s(40);t.exports.PoonyaPrototype=P.PoonyaPrototype,t.exports.PoonyaStaticLibrary=P.PoonyaStaticLibrary,t.exports.Exceptions=P.Exceptions,t.exports.FIELDFLAGS=P.FIELDFLAGS},40:(t,e,s)=>{"use strict";t.exports.FIELDFLAGS=s(351).FIELDFLAGS,t.exports.Exceptions=s(943),t.exports.PoonyaStaticLibrary=s(742).PoonyaStaticLibrary,t.exports.PoonyaPrototype=s(326)},88:(t,e,s)=>{"use strict";const{SERVICE:n}=s(351),{Operand:r}=s(501),{iPoonyaObject:i,iPoonyaPrototype:o,iCodeEmitter:a}=s(161),{PoonyaException:l}=s(943),c=s(329);function u(t,e){return"0x"+t.toString(16).padStart(e-2,"0")}function d(t){let e=new Array;for(let s,n=0,r=t.length;n<r;n++)e.push((s=t.charCodeAt(n))>>>8,255&s);return e}function p(t){let e="";for(let s=0,n=t.length;s<n;s+=2)e+=String.fromCharCode(t[s]<<8|t[s+1]);return e}const h=function(t,...e){Promise.resolve().then((()=>t(...e)))},f=h;t.exports.Tick=f,t.exports.Cast=function(t,e,s=new Array,l){switch(typeof t){case"bigint":e.createObject(t,-1,n.CONSTRUCTORS.INTEGER,null,s,l);break;case"number":e.createObject(t,-1,n.CONSTRUCTORS.NUMBER,null,s,l);break;case"string":e.createObject(t,-1,n.CONSTRUCTORS.STRING,null,s,l);break;case"symbol":e.createObject(Symbol.keyFor(t),-1,n.CONSTRUCTORS.STRING,null,s,l);break;case"boolean":e.createObject(t,-1,n.CONSTRUCTORS.BOOLEAN,null,s,l);break;case"undefined":e.createObject(t,-1,n.CONSTRUCTORS.NULL,null,s,l);break;case"object":switch(!0){case null===t:e.createObject(t,-1,n.CONSTRUCTORS.NULL,null,s,l);break;case t instanceof i:case t instanceof o:case t instanceof c:case t instanceof r:l(t);break;case t instanceof a:e.createObject(t,-1,n.CONSTRUCTORS.PATTERN,null,s,l);break;default:s.push(t),Array.isArray(t)?e.createObject(t,-1,n.CONSTRUCTORS.ARRAY,null,s,l):e.createObject(t,-1,n.CONSTRUCTORS.OBJECT,null,s,l)}break;case"function":l(new c(t))}},t.exports.toFixed=u,t.exports.toBytes=d,t.exports.countKeys=function(t,e,s,n){for(let r=e,i=t.length;r<i;r++)if(null==t[r]||!t[r].equals(s,n))return r-e},t.exports.fromBytes=p,t.exports.throwError=function(t,e,s=5){s=parseInt(s);const n=null!=this&&null!=this.data?this.data.linker_data.getOwnChunck(t):null,r=null!=n?n.toString():null!=this?this.input:null,i=null!=n?n.name:null!=this?this.path:null,o=new Array;if(r){let e=r.split(/$\n/gm),a=p(d(r).slice(0,t-(null!=n?n.from:0))).split(/$\n/gm),l=a.length-1,c=l-parseInt(s/2)<0?0:l-parseInt(s/2),h=c+s<e.length?c+s:e.length,f=h.toString(16).length+2;if(-1!=t){o.push("  at ",i,":",l+1,":",a[l].length," :>\n");for(let t=c;t<h;t++)o.push("     ",u(t+1,f)," |> ",e[t]),t===l&&o.push("\n     ".padEnd(f+6," ")," |> ".padEnd(a[l].length+3," "),"^"),t+1!==h&&o.push("\n")}}if(null!=e&&!e.throwed)throw e instanceof l?(0!=o.length&&(e.message+="\n"+o.join("")),e.throwed=!0,e):new l(e,o.join(""),!0)},t.exports.maybeEquals=function(t,e,s,n){for(;null!=t[e]&&t[e].equals(s,n);)t.splice(e,1);return!0},t.exports.setImmediate=h,t.exports.createCustomErrorHandler=function(t,e){return(s,n)=>{try{t(s,n)}catch(t){e.error(t)}}}},386:()=>{}},e={};function s(n){if(e[n])return e[n].exports;var r=e[n]={id:n,loaded:!1,exports:{}};return t[n](r,r.exports,s),r.loaded=!0,r.exports}return s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),s(216)})()));
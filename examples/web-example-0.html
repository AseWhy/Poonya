<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Web-example-0</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    
    <style>
        @import url(data/fonts/Andika.Import.css);

        @keyframes blink {
            from {
                opacity: 0;
            }

            50% {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }

        .h-button {
            padding: 0.5em 2em;
            border: none;
            margin: 0 0.15em;
            background-color: white;
            outline: none;
            cursor: pointer;
            text-transform: uppercase;
            font-family: monospace;
            border-bottom: 1px solid white;
        }

        .h-button:focus {
            outline: none;
        }

        .h-button.selected {
            border-bottom: 1px solid black;
        }

        .h-button:hover {
            background-color: whitesmoke;
        }

        .header {
            width: 100%;
            display: grid;
            grid-template-areas: 'left right';
            background-image: url(./data/0.jpg);
        }

        body {
            margin: 0;
            width: 100%;
            color: #383838;
            background-color: #4d4d4d;
        }

        p {
            text-align: justify;
        }

        .wrap-body-container {
            width: 100%;
            overflow: hidden;
            background-color: white;
        }

        .right-hand {
            font-size: 7em;
            font-family: monospace;
            filter: drop-shadow(5px 5px 10px black);
            margin: auto;
            grid-area: right;
        }

        .left-hand {
            grid-area: left;
        }

        .content {
            width: 300%;
            position: relative;
            display: flex;
            top: 0;
            left: 0;
            transition: 0.3s cubic-bezier(0.79,-0.29, 0.26, 1.26);
            overflow: hidden;
        }

        .content-unit {
            width: 100%;
            padding: 1em;
            font-family: 'Andika New Basic', sans-serif;
            height: fit-content;
            font-size: large;
        }

        .content-img {
            width: 100%;
            margin: 0.5em 0;
        }

        .d-content-limiter {
            width: 40%;
        }

        .blink {
            opacity: 0;
            animation: blink 0.75s infinite;
        }

        button {
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .ripple {
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.4);
            transform: scale(0);
            position: absolute;
            animation: ripple 0.5s linear;
            pointer-events: none;
            opacity: 1;
        }

        .poonya-logo {
            filter: drop-shadow(5px 5px 10px black);
        }

        .footer {
            width: 100%;
            height: min-content;
            padding: 1em;
            display: grid;
            grid-template-areas: '. . .';
            grid-template-columns: min-content max-content auto;
            gap: 0.5em;
            font-family: 'Andika New Basic', sans-serif;
            font-size: large;
            overflow: hidden;
            border-top: 1px solid;
            background-color: #4d4d4d;
            color: white;
        }

        .footer-badges {
            display: grid;
            gap: 0.25em;
        }

        .footer-body {
            display: grid;
            gap: 0.25em;
        }

        .badge-img {
            float: right;
        }

        .footer-body-memeber {
            padding: 0 0.5em;
            width: fit-content;
            font-size: small;
            text-transform: uppercase;
            font-family: monospace;
            text-decoration: none;
            color: white;
            height: 28px;
            line-height: 28px;
            font-weight: 700;
        }

        a.footer-body-memeber:hover, .badge-img:hover {
            filter: brightness(1.25);

            color: skyblue
        }

        @keyframes ripple {
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        @media screen and (max-width: 820px) {
            .header {
                grid-template-areas: 
                                'right'
                                'left';
            }

            .right-hand {
                position: fixed;
                font-size: 1.5em;
                padding: 0.25em;
                width: 100%;
                background: white;
                z-index: 100;
                filter: none;
            }

            .left-hand {
                margin-top: 1.5em;
            }

            .d-content-limiter {
                width: 100%;
            }

            .poonya-logo {
                width: 45%;
                display: grid;
                margin: auto;
            }

            .header-buttons {
                display: grid;
                grid-template-areas: '. . .';
            }
            
            .footer {
                grid-template-areas: '. .';
                grid-template-columns: min-content ;
            }

            .footer-print {
                display: none;
            }
            
            .footer-body-memeber {
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
            }
        }
    </style>
</head>
<body>
    <script src="./data/poonya.browser.var.bundle.js"></script>

    <script type='text/poonya' import='default.html'>
        set TAGS = html.TAGS;

        > html.createElement(TAGS.DIV,
            html.createElement(TAGS.DIV,
                html.createElement(TAGS.IMG, 
                    '', ( -> 
                        src -> './data/2.png',
                        loading -> 'lazy',
                        class -> 'poonya-logo'
                    )
                ) + html.createElement(TAGS.DIV, 
                        html.createElement(
                            TAGS.BUTTON, 'Главная',
                            ( -> class -> 'h-button')
                        ) + html.createElement(
                            TAGS.BUTTON, 'Особенности',
                            ( -> class -> 'h-button')
                        ) + html.createElement(
                            TAGS.BUTTON, 'О Poonya',
                            ( -> class -> 'h-button')
                        ),
                    ( -> class -> 'header-buttons')),
                ( -> class -> 'left-hand')
            ) + html.createElement(TAGS.DIV,
                    'Poonya! ' + html.createElement(TAGS.B, 
                    '_', ( -> 
                        class -> 'blink'
                    )
                ),
                ( -> class -> 'right-hand')
            ),
        ( -> class -> 'header'));

        > html.createElement(TAGS.DIV,
            html.createElement(TAGS.DIV,
                html.createElement(TAGS.DIV,
                    html.createElement(TAGS.DIV,
                        html.createElement(
                            TAGS.H1, 
                            'Poonya'
                        ) + html.createElement(
                            TAGS.P,
                            'Poonya - это универсальный препроцессор, на котором сейчас функционирует эта страница)'
                        ) + html.createElement(
                            TAGS.P,
                            'Poonya(пунья) позволяет генерировать текст в целом, и не нацелена на генерацию чего-то конкретного. Вы можете использовать пунью как это посчитаете нужным, для чат-ботов, генерации веб страниц и т.д.'
                        ) + html.createElement(
                            TAGS.P,
                            'Не сказать что прям очень удобно, но если вы заинтересовались то вот ' + html.createElement(
                                TAGS.A,
                                'гитхаб пуньи',
                                ( -> 
                                    href -> 'https://github.com/AseWhy/Poonya'
                                )
                            )
                        ), ( -> 
                            class -> 'd-content-limiter'
                        )
                    ), ( ->
                        class -> 'content-unit'
                    )
                ) + html.createElement(TAGS.DIV,
                    html.createElement(TAGS.DIV,
                        html.createElement(
                            TAGS.H1,
                            'Особенности'
                        ) + html.createElement(
                            TAGS.P,
                            'Poonya не ставит перед собой четкого предназначения - вы можете использовать poonya как это вам нужно. у poonya довольно быстрый пасинг, кроме того единожды созданный шаблон можно использовать несколько раз, это исключает необходимость заново читать файл, и разбирать его, в случае если код poonya находится в файле.'
                        ) + html.createElement(
                            TAGS.P,
                            'Poonya использует простой и понятный синтаксис присущий больниству языков.'
                        ) + html.createElement(
                            TAGS.P,
                            'Poonya легко встраивается: poonya доступна как в браузере, так и в nodejs, в случае nodejs вам необходимо сделать require("poonya") и весь функционал poonya окажется у вас в руках, в браузере вам необходимо подключить один из бандлов poonya.'
                        ),
                        ( -> 
                            class -> 'd-content-limiter'
                        )
                    ), ( ->
                        class -> 'content-unit'
                    )
                ) + html.createElement(TAGS.DIV,
                    html.createElement(TAGS.DIV,
                        html.createElement(
                            TAGS.H1, 
                            'О названии...'
                        ) + html.createElement(
                            TAGS.P,
                            'Китайцы назвали этого зверя огненной лисой, что звучало как «хон хо». Другим именем было «кошачий медведь». Жители Непала называли это животное «пунья» и именно от этого слова и произошло название «панда».'
                        ) + html.createElement(TAGS.IMG, 
                            '', ( -> 
                                src -> './data/1.jpg',
                                class -> 'content-img',
                                loading -> 'lazy'
                            )
                        )  + html.createElement(
                            TAGS.P,
                            'Вначале Томас Хардвик предлагал назвать малую панду «Ya» (Wah). Так называли это животное в некоторых местностях Китая по аналогии со звуками, которые издавало это животное. Однако его инициатива оказалась пустой, поскольку его возвращение в Англию было отложено, а за это время другой натуралист, на этот раз уже из Франции, Фредерик Кювье, дал новому животному его нынешнее латинское название – Ailurus fulgens, что в переводе на русский означает «блистающая (сверкающая) кошка». Британских ученых такое пренебрежение нормами этики возмутило, однако ничего изменить уже было нельзя, поскольку согласно принятым в этой среде нормам научное название, будучи однажды присвоено, не может быть изменено, а первооткрывателем вида считается тот, кто это название дал.'
                        ), ( -> 
                            class -> 'd-content-limiter'
                        )
                    ), ( ->
                        class -> 'content-unit'
                    )
                ), ( -> 
                    class -> 'content',
                    id -> 'content'
                )
            ), ( -> 
                class -> 'wrap-body-container'
            )
        );

        > html.createElement(
            TAGS.DIV,
            html.createElement(
                TAGS.DIV,
                html.createElement(
                    TAGS.A,
                    html.createElement(TAGS.IMG, 
                        '', ( -> 
                            src -> 'https://img.shields.io/github/commit-activity/w/AseWhy/Poonya?style=for-the-badge',
                            alt -> 'Activity',
                            class -> 'badge-img'
                        )
                    ),
                    ( -> 
                        href -> 'https://github.com/AseWhy/Poonya'
                    )
                ) + html.createElement(
                    TAGS.A,
                    html.createElement(TAGS.IMG, 
                        '', ( -> 
                            src -> 'https://img.shields.io/badge/version-0.4.7-green?style=for-the-badge',
                            alt -> 'Version',
                            class -> 'badge-img'
                        )
                    ),
                    ( -> 
                        href -> 'https://github.com/AseWhy/Poonya'
                    )
                ) + html.createElement(
                    TAGS.A,
                    html.createElement(TAGS.IMG, 
                        '', ( -> 
                            src -> 'https://img.shields.io/github/size/AseWhy/Poonya/dist/poonya.browser.var.bundle.min.js?style=for-the-badge',
                            alt -> 'Bundle size',
                            class -> 'badge-img'
                        )
                    ),
                    ( -> 
                        href -> 'https://github.com/AseWhy/Poonya/blob/master/dist/poonya.browser.var.bundle.min.js'
                    )
                ) + html.createElement(
                    TAGS.A,
                    html.createElement(TAGS.IMG, 
                        '', ( -> 
                            src -> 'https://img.shields.io/badge/license-MIT-blue.svg?style=for-the-badge',
                            alt -> 'GitHub license',
                            class -> 'badge-img'
                        )
                    ),
                    ( -> 
                        href -> 'https://github.com/AseWhy/Poonya/blob/master/LICENSE'
                    )
                ),
                ( -> class -> 'footer-badges')
            ) + html.createElement(
                TAGS.DIV,
                html.createElement(
                    TAGS.SPAN,
                    '© Astecom 2021',
                    ( -> 
                        class -> 'footer-copyright footer-body-memeber'
                    )
                ) + html.createElement(
                    TAGS.A,
                    'Github репо',
                    ( -> 
                        href -> 'https://github.com/AseWhy/Poonya',
                        class -> 'footer-body-memeber green'
                    )
                ) + html.createElement(
                    TAGS.A,
                    'Мой Github',
                    ( -> 
                        href -> 'https://github.com/AseWhy',
                        class -> 'footer-body-memeber'
                    )
                ) + html.createElement(
                    TAGS.A,
                    'Связаться со мной',
                    ( ->
                        href -> 'mailto:astecom@mail.ru',
                        class -> 'footer-body-memeber'
                    )
                ),
                ( -> class -> 'footer-body')
            ) + html.createElement(TAGS.DIV,
                    '⚖ MIT License' + html.createTag(TAGS.BR) + html.createElement(TAGS.SPAN,
                        'Демонстрационный файл - просто по тому что могу...'
                    ),
                ( -> class -> 'footer-print')
            ),
            ( -> class -> 'footer')
        )
    </script>

    <script type="text/javascript">
        window.addEventListener('poonya:load', () => {
            const buttons = document.getElementsByClassName('h-button');
            const content = document.getElementById('content');

            let tm, active;

            function resize(){
                content.style.height = content.children[active].offsetHeight + 'px';
            }

            for(let i = 0, leng = buttons.length; i < leng; i++)
                ((target, index) => {
                    target.addEventListener('click', event => {
                        if(tm != null)
                            clearTimeout(tm);

                        for(let i = 0, leng = buttons.length; i < leng; i++) {
                            buttons[i].classList.remove('selected');
                        }
                        
                        target.classList.add('selected');

                        content.style.left = -(100 * index) + '%';
                        content.style.height = content.children[index].offsetHeight + 'px';

                        tm = setTimeout(resize, 300);

                        active = index;
                    })
                })(buttons[i], i);

            if(buttons[0]) buttons[0].click();

            // Наблюдаем за изминениями размера
            new ResizeObserver(() => {
                if(tm != null)
                    clearTimeout(tm);

                tm = setTimeout(resize, 300);
            }).observe(content);

            window.addEventListener('click', (e) => {
                if(e.target.tagName != 'BUTTON')
                    return;

                e.preventDefault();

                // Remove any old one
                const ripple = document.querySelectorAll('.ripple');

                if (ripple) {
                    for(let i = 0, leng = ripple.length; i < leng; i++)
                        ripple[i].remove();
                }
            
                // Setup
                let buttonWidth = e.target.offsetWidth, 
                    buttonHeight = e.target.offsetHeight;
            
                // Make it round!
                if(buttonWidth >= buttonHeight) {
                    buttonHeight = buttonWidth;
                } else {
                    buttonWidth = buttonHeight;
                }
            
                // Get the center of the element
                const x = e.offsetX == undefined ? e.layerX : e.offsetX - buttonWidth / 2
                    , y = e.offsetY == undefined ? e.layerY : e.offsetY - buttonHeight / 2;
            
                // Add the element
                const span = document.createElement('span');

                span.className = 'ripple';

                const s = span.style;

                s.width = buttonWidth + 'px';
                s.height = buttonHeight + 'px';

                s.top = y + 'px';
                s.left = x + 'px';

                e.target.appendChild(span);
            })
        })
    </script>
</body>
</html>